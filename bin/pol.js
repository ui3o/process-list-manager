#!/usr/bin/env node

(()=>{"use strict";var e={562:e=>{function t(e){return"number"==typeof e||!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}e.exports=function(e,o){o||(o={});var r={bools:{},strings:{},unknownFn:null};"function"==typeof o.unknown&&(r.unknownFn=o.unknown),"boolean"==typeof o.boolean&&o.boolean?r.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach((function(e){r.bools[e]=!0}));var i={};function s(e){return i[e].some((function(e){return r.bools[e]}))}Object.keys(o.alias||{}).forEach((function(e){i[e]=[].concat(o.alias[e]),i[e].forEach((function(t){i[t]=[e].concat(i[e].filter((function(e){return t!==e})))}))})),[].concat(o.string).filter(Boolean).forEach((function(e){r.strings[e]=!0,i[e]&&[].concat(i[e]).forEach((function(e){r.strings[e]=!0}))}));var l=o.default||{},c={_:[]};function a(e,t,o){for(var i=e,s=0;s<t.length-1;s++){var l=t[s];if(n(i,l))return;void 0===i[l]&&(i[l]={}),i[l]!==Object.prototype&&i[l]!==Number.prototype&&i[l]!==String.prototype||(i[l]={}),i[l]===Array.prototype&&(i[l]=[]),i=i[l]}var c=t[t.length-1];n(i,c)||(i!==Object.prototype&&i!==Number.prototype&&i!==String.prototype||(i={}),i===Array.prototype&&(i=[]),void 0===i[c]||r.bools[c]||"boolean"==typeof i[c]?i[c]=o:Array.isArray(i[c])?i[c].push(o):i[c]=[i[c],o])}function p(e,n,o){if(!o||!r.unknownFn||function(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||i[e]}(e,o)||!1!==r.unknownFn(o)){var s=!r.strings[e]&&t(n)?Number(n):n;a(c,e.split("."),s),(i[e]||[]).forEach((function(e){a(c,e.split("."),s)}))}}Object.keys(r.bools).forEach((function(e){p(e,void 0!==l[e]&&l[e])}));var u=[];-1!==e.indexOf("--")&&(u=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var d=0;d<e.length;d++){var g,m,f=e[d];if(/^--.+=/.test(f)){var v=f.match(/^--([^=]+)=([\s\S]*)$/);g=v[1];var h=v[2];r.bools[g]&&(h="false"!==h),p(g,h,f)}else if(/^--no-.+/.test(f))p(g=f.match(/^--no-(.+)/)[1],!1,f);else if(/^--.+/.test(f))g=f.match(/^--(.+)/)[1],void 0===(m=e[d+1])||/^(-|--)[^-]/.test(m)||r.bools[g]||r.allBools||i[g]&&s(g)?/^(true|false)$/.test(m)?(p(g,"true"===m,f),d+=1):p(g,!r.strings[g]||"",f):(p(g,m,f),d+=1);else if(/^-[^-]+/.test(f)){for(var _=f.slice(1,-1).split(""),b=!1,S=0;S<_.length;S++)if("-"!==(m=f.slice(S+2))){if(/[A-Za-z]/.test(_[S])&&"="===m[0]){p(_[S],m.slice(1),f),b=!0;break}if(/[A-Za-z]/.test(_[S])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){p(_[S],m,f),b=!0;break}if(_[S+1]&&_[S+1].match(/\W/)){p(_[S],f.slice(S+2),f),b=!0;break}p(_[S],!r.strings[_[S]]||"",f)}else p(_[S],m,f);g=f.slice(-1)[0],b||"-"===g||(!e[d+1]||/^(-|--)[^-]/.test(e[d+1])||r.bools[g]||i[g]&&s(g)?e[d+1]&&/^(true|false)$/.test(e[d+1])?(p(g,"true"===e[d+1],f),d+=1):p(g,!r.strings[g]||"",f):(p(g,e[d+1],f),d+=1))}else if(r.unknownFn&&!1===r.unknownFn(f)||c._.push(r.strings._||!t(f)?f:Number(f)),o.stopEarly){c._.push.apply(c._,e.slice(d+1));break}}return Object.keys(l).forEach((function(e){var t,n,o;t=c,n=e.split("."),o=t,n.slice(0,-1).forEach((function(e){o=o[e]||{}})),n[n.length-1]in o||(a(c,e.split("."),l[e]),(i[e]||[]).forEach((function(t){a(c,t.split("."),l[e])})))})),o["--"]?c["--"]=u.slice():u.forEach((function(e){c._.push(e)})),c}},757:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.help=void 0;const r=o(n(562)),i=o(n(147)),s=n(626),l=n(45),c=(0,r.default)(process.argv.slice(2));t.help=()=>{(0,l.printUsage)({name:"pol - Process list manager.",usage:[{name:"pol [options][command]",desc:"Process list (pol) manager accepts command and options."}],options:[{desc:"show help",switch:"-h, --help",type:"boolean"}],commands:[{desc:"boot init system",switch:"boot"},{desc:"start [service|--all]",switch:"start"},{desc:"restart [service|--all]",switch:"restart"},{desc:"stop [service|--all]",switch:"stop"},{desc:"list running [none|--all]",switch:"ps"}],version:i.default.version,copyright:"copyright@2023"}),process.exit(0)},(c.h||c.help)&&(0,t.help)(),(0,s.polDaemon)(c)},685:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pol=void 0;const o=n(473),r=n(522);t.pol=new class{constructor(){this.SERVICE_STATE={READY:{name:"SERVICE_STATE_READY",state:0},UP:{name:"SERVICE_STATE_UP",state:1},DOWN:{name:"SERVICE_STATE_DOWN",state:2},STOP:{name:"SERVICE_STATE_STOP",state:3}},this.defaults={CLI_PRE_INTERVAL:50,CLI_INTERVAL:200},this.running=!1,this.srv={},this.loginService=void 0}init(e,t){return this.srv[e]=this.srv[e]?this.srv[e]:{processes:[],path:t,name:e,state:this.SERVICE_STATE.READY.state,interval:{before_onStart:void 0,after_onStart:void 0,before_onStop:void 0,after_onStop:void 0},cli:{after_onStart:{},before_onStart:{},after_onStop:{},before_onStop:{},after_onLogin:{},before_onLogin:{}},exec:{onStart:void 0,onLogin:void 0}},this.srv[e].processes=[],this.srv[e]}startRunChecker(e,t,n,o="",i,s=void 0){const l=this.srv[e].interval,c=this.srv[e].cli[`${t}_${n}`],a=n.toLowerCase().includes("start")?"start":"stop";"before_onStart"==`${t}_${n}`&&s&&(this.srv[e].startResolver=s);const p=()=>{Object.keys(c).length?(l[`${t}_${n}`]||(l[`${t}_${n}`]=setInterval(p,2e3)),i.write(`         waiting ${t} ${e} ${a} ...`)):(l[`${t}_${n}`]&&(l[`${t}_${n}`]=clearInterval(l[`${t}_${n}`]),i.write(`[${r.term.fc.green}  OK  ${r.term.mc.resetAll}] ${e} is ${o} ...`)),s&&s())};Object.keys(c).length?setTimeout(p,500):s&&s()}stopRunChecker(e,t){var n,o;const r=this.srv[e].interval;(r[`before_on${t}`]||r[`after_on${t}`])&&(r[`before_on${t}`]&&(r[`before_on${t}`]=clearInterval(r[`before_on${t}`]),this.srv[e].startResolver&&(null===(o=(n=this.srv[e]).startResolver)||void 0===o||o.call(n))),r[`after_on${t}`]&&(r[`after_on${t}`]=clearInterval(r[`after_on${t}`])))}setRunning(e){this.srv[e].running=!0}addProcess(e,t,n){this.srv[e].processes.push({procId:t,procName:n})}addCli(e,n,o,r){switch(n){case"onStart":case"onLogin":case"onStop":("onStop"===n?t.pol.isStateStop(e):this.srv[e].exec[n])?this.srv[e].cli[`after_${n}`][`${o}`]=r:this.srv[e].cli[`before_${n}`][`${o}`]=r}}addExec(e,t,n,r){switch(t){case"onStart":case"onLogin":this.srv[e].exec[t]?(0,o.msgToLog)(`not possible to execute to exe in ${t}`,"pol   ",e):this.srv[e].exec[t]=r}}delCli(e,t,n){switch(t){case"onStart":case"onStop":case"onLogin":Object.keys(this.srv[e].cli[`before_${t}`]).some((e=>e===`${n}`))?Object.keys(this.srv[e].cli[`before_${t}`]).forEach((o=>{o===`${n}`&&delete this.srv[e].cli[`before_${t}`][o]})):Object.keys(this.srv[e].cli[`after_${t}`]).forEach((o=>{o===`${n}`&&delete this.srv[e].cli[`after_${t}`][o]}))}}delExec(e,t){switch(t){case"onStart":case"onLogin":this.srv[e].exec[t]=void 0}}setSetup(e,t){this.srv[e].setup=t}setLoginService(e){this.loginService=this.srv[e]}getLoginService(){return this.loginService}stateInit(e){this.srv[e].state=this.SERVICE_STATE.READY.state}get(e){return this.srv[e]}isStateAfterDown(e){return this.srv[e].state>=this.SERVICE_STATE.DOWN.state}isStateStop(e){return this.srv[e].state===this.SERVICE_STATE.STOP.state}setStateReady(e){this.srv[e].state=this.SERVICE_STATE.READY.state,this.srv[e].running=!1}setStateDown(e){this.srv[e].state=this.SERVICE_STATE.DOWN.state}setStateStop(e){this.srv[e].state=this.SERVICE_STATE.STOP.state}getAllRunning(){return this.getServices().filter((e=>e.running))}getAllStopped(){return this.getServices().filter((e=>!e.running))}getServices(){return Object.values(this.srv).sort(((e,t)=>e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0))}getNanoSecTime(){const e=process.hrtime();return 1e9*e[0]+e[1]}}},238:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logFile=t.cliSplitByLine=t.cliSplitByLineSync=t.log=t.TASK_INDENT=void 0;const r=n(81),i=o(n(358)),s=o(n(147)),l=n(685),c=n(473),a=n(522);function p(...e){const t=[...arguments];(0,r.spawnSync)(t.shift(),[...t],{encoding:"utf-8",stdio:"ignore"})}if(t.TASK_INDENT="        ",t.log={write:console.log,log:console.log,warn:console.warn,err:console.error,end:()=>{}},!i.default.existsSync(c.LOG_FILE_PATH)){try{i.default.accessSync(c.LOG_FILE_ROOT,i.default.constants.R_OK|i.default.constants.W_OK|i.default.constants.X_OK)}catch(e){t.log.log(`[${a.term.fc.red}REQUIRED${a.term.mc.resetAll}] Please create '/var/log/pol' folder with 'rw' access for the running user!`),process.exit(1)}p("touch",c.LOG_FILE_PATH)}const u=`${process.env.ZSH}/custom/plugins/pol`,d=`${u}/pol.plugin.${s.default.version}.version`;process.env.ZSH&&process.env.ZSH.endsWith(".oh-my-zsh")&&!i.default.existsSync(d)&&(p("mkdir","-p",`${u}`),p("touch",d),p("cp",`${__dirname}/../zsh-plugin/pol.plugin.zsh`,`${u}/pol.plugin.zsh`),p("cp",`${__dirname}/../zsh-plugin/plugin.js`,`${u}/plugin.js`),t.log.log(`[${a.term.fc.green}  INFO  ${a.term.mc.resetAll}] .oh-my-zsh custom plugin installed. Please add 'pol' to enabled plugin list in '~/.zshrc' file.`)),process.env.TZ=process.env.TZ?process.env.TZ:i.default.readFileSync("/etc/timezone").toString().split("\n")[0];const g=(e,t,n)=>{Object.defineProperty(e.cli,"noErr",{get:function(){return globalThis.service.__prop__.noErr=!0,e.cli}}),Object.defineProperty(e.cli,"splitByLine",{get:function(){return globalThis.service.__prop__.splitByLine=!0,e.cli}}),Object.defineProperty(e.cli,"splitAll",{get:function(){return globalThis.service.__prop__.splitAll=!0,e.cli}}),e.cli.gid=(t="")=>(globalThis.service.__prop__.gid=t,e.cli),e.cli.uid=(t="")=>(globalThis.service.__prop__.uid=t,e.cli),e.cli.wd=(t="")=>(globalThis.service.__prop__.cwd=t,e.cli),e.cli.eol=(t="")=>(globalThis.service.__prop__.eol=t,e.cli),e.cli.do=function(){return v([...arguments],this.serviceName)},e.toLog=function(e){(0,c.msgToLog)(e)},e.toLog=e.toLog.bind(Object.assign(Object.assign({},t),{type:n,controller:e})),e.cli.do=e.cli.do.bind(Object.assign(Object.assign({},t),{type:n,controller:e}))},m=(e,t,n)=>{Object.defineProperty(e.exec,"it",{get:function(){return globalThis.service.__prop__.it=!0,e.exec}}),e.exec.gid=(t="")=>(globalThis.service.__prop__.gid=t,e.exec),e.exec.uid=(t="")=>(globalThis.service.__prop__.uid=t,e.exec),e.exec.wd=(t="")=>(globalThis.service.__prop__.cwd=t,e.exec),e.exec.do=function(){return f([...arguments],this.serviceName)},e.exec.do=e.exec.do.bind(Object.assign(Object.assign({},t),{type:n,controller:e}))},f=(e,n)=>{var o;const i=e.shift(),s=[...e],a=l.pol.getNanoSecTime(),p=null===(o=(new Error).stack)||void 0===o?void 0:o.split("at ")[3].split(" ")[0].split(".")[1];let u=Object.assign({},globalThis.service.__prop__);globalThis.service.__prop__={};const d=Object.assign(Object.assign({},process.env),{POL_CL_ENV:`__POL_CL__${i}__${a}__EXEC__POL_CL__`});if(l.pol.isStateAfterDown(n)||l.pol.get(n).exec[p])return Promise.resolve();if(u.gid){const e=(0,t.cliSplitByLineSync)("id","-g",`${u.gid}`);u.gid=e.c?void 0:Number(e.o[0])}if(u.uid){const e=(0,t.cliSplitByLineSync)("id","-u",`${u.uid}`);u.uid=e.c?void 0:Number(e.o[0])}const g=(0,r.spawn)(i,s,{cwd:u.cwd,env:d,stdio:u.it?"inherit":void 0,gid:u.gid,uid:u.uid}),m=new Promise((e=>{var t,o;u.it||(null===(t=g.stdout)||void 0===t||t.on("data",(e=>{(0,c.msgToLog)(e.toString(),"outexe")})),null===(o=g.stderr)||void 0===o||o.on("data",(e=>{(0,c.msgToLog)(e.toString(),"errexe")}))),g.on("close",(t=>{e(t),l.pol.delExec(n,p)}))}));return l.pol.addExec(n,p,a,{prog:i,params:s,promise:m,options:u,timestamp:a}),m},v=(e,n)=>{var o;const i=[],s=e.shift(),c=[...e],a=l.pol.getNanoSecTime(),p=null===(o=(new Error).stack)||void 0===o?void 0:o.split("at ")[3].split(" ")[0].split(".")[1];let u=Object.assign({},globalThis.service.__prop__);globalThis.service.__prop__={};const d=Object.assign(Object.assign({},process.env),{POL_CL_ENV:`__POL_CL__${s}__${a}__CLI__POL_CL__`});if(l.pol.isStateAfterDown(n)&&"onStop"!=p)return Promise.resolve();if(u.gid){const e=(0,t.cliSplitByLineSync)("id","-g",`${u.gid}`);u.gid=e.c?void 0:Number(e.o[0])}if(u.uid){const e=(0,t.cliSplitByLineSync)("id","-u",`${u.uid}`);u.uid=e.c?void 0:Number(e.o[0])}const g=(0,r.spawn)(s,c,{cwd:u.cwd,env:d,gid:u.gid,uid:u.uid});return l.pol.addCli(n,p,a,{prog:s,params:c}),new Promise((e=>{let t="";g.stdout.on("data",(e=>{t+=e})),g.stderr.on("data",(e=>{u.noErr||(t+=e)})),g.on("close",(o=>{if(u.splitAll||u.splitByLine){const n=t.split(u.eol?u.eol:"\n").filter((e=>e));u.splitByLine?e({o:n,c:o}):(n.forEach((e=>i.push(e.split(/[ \t]/)))),e({o:i,c:o}))}else e({o:t,c:o});l.pol.delCli(n,p,a)}))}))};globalThis.service={set setup(e){var t,n;const o=Object.assign(Object.assign({},e),{serviceName:null===(n=null===(t=(new Error).stack)||void 0===t?void 0:t.split("at ")[2])||void 0===n?void 0:n.trim().split(".js:")[0].replace(/.*\//,""),ssOnStart:{cli:{},exec:{}},ssOnStop:{cli:{}},ssOnLogin:{cli:{},exec:{}}});g(o.ssOnStart,o,"start"),g(o.ssOnStop,o,"stop"),g(o.ssOnLogin,o,"login"),m(o.ssOnStart,o,"start"),m(o.ssOnLogin,o,"login"),l.pol.stateInit(o.serviceName),l.pol.setSetup(o.serviceName,o)},__prop__:{}},t.cliSplitByLineSync=function(...e){const t=[...arguments],n=(0,r.spawnSync)(t.shift(),[...t]);return{o:n.stdout.toString().split("\n").filter((e=>e)),c:n.status}},t.cliSplitByLine=function(...e){const t=[...arguments],n=(0,r.spawn)(t.shift(),[...t]);return new Promise((e=>{let t="";n.stdout.on("data",(e=>{t+=e})),n.stderr.on("data",(e=>{t+=e})),n.on("close",(n=>{const o=t.split("\n").filter((e=>e));e({o,c:n})}))}))},t.logFile={write:c.msgToLog,log:()=>{},warn:()=>{},err:()=>{},end:()=>{}},console.log=console.log.bind(global.console,t.TASK_INDENT),console.warn=console.warn.bind(global.console,t.TASK_INDENT),console.error=console.error.bind(global.console,t.TASK_INDENT),Date.prototype.ISOStrings=function(){const e=-this.getTimezoneOffset(),t=function(e){return(e<10?"0":"")+e},n=(e>=0?"+":"-")+t(Math.floor(Math.abs(e)/60))+":"+t(Math.abs(e)%60);return this.setTime(this.getTime()+60*e*1e3),this.toISOString().replace("Z",n)}},473:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.msgToLog=t.LOG_FILE_PATH=t.LOG_FILE_ROOT=void 0;const r=o(n(358));t.LOG_FILE_ROOT="/var/log/pol",t.LOG_FILE_PATH=`${t.LOG_FILE_ROOT}/pol.log`;const i=r.default.createWriteStream(t.LOG_FILE_PATH,{flags:"a"});t.msgToLog=(e,t="outlog",n)=>{const o={time:(new Date).ISOStrings(),level:t,service:n,message:e};i.write(`${JSON.stringify(o)}\n`)}},626:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function l(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.polDaemon=void 0;const i=r(n(358)),s=r(n(37)),l=n(757),c=n(685),a=n(238),p=n(302),u=n(522),d="possible options: [--all|service_name.service]",g=process.env.POL_CONFIG_FOLDER?[process.env.POL_CONFIG_FOLDER]:["/etc/pol"];g.push(`${s.default.homedir()}/.config/pol`);const m=Object.assign({},process.env);t.polDaemon=e=>o(void 0,void 0,void 0,(function*(){var t,n,r,s,f,v,h;const _=()=>o(void 0,void 0,void 0,(function*(){const e=yield(0,a.cliSplitByLine)("find",...g,"-name","*.service.js"),t=yield(0,a.cliSplitByLine)("readlink","-e",...g.map((e=>`${e}/login.service.target.js`))),n=yield(0,a.cliSplitByLine)("sh","-c",'ps aux | grep ".*node.*pol.*boot$"');c.pol.running=!(n.o.length<2),e.o.filter((e=>!e.includes("No such file or directory"))).map((e=>{var t,n;const o=null===(n=null===(t=null==e?void 0:e.split("/"))||void 0===t?void 0:t.pop())||void 0===n?void 0:n.replace(".js","");c.pol.init(o,e)}));const o=(yield(0,a.cliSplitByLine)("find","/proc","-maxdepth","2","-name","environ")).o.filter((e=>{try{return i.default.accessSync(e,i.default.constants.R_OK),!0}catch(e){return!1}}));for(const e of o)try{const t=i.default.readFileSync(e).toString();if(t.includes("__POL__")){const n=t.split("__POL_CL__")[1].split("__"),o=t.split("__POL__")[1].split("__");c.pol.setRunning(o[0]),c.pol.addProcess(o[0],e.split("/")[2],n[0])}}catch(e){}const r=require;for(const e of c.pol.getServices())r(e.path);t.o.forEach((e=>{var t,n;c.pol.setLoginService(null===(n=null===(t=null==e?void 0:e.split("/"))||void 0===t?void 0:t.pop())||void 0===n?void 0:n.replace(".js",""))}))}));yield _();const b=(e,t)=>o(void 0,void 0,void 0,(function*(){if(!e)return;if(!c.pol.getServices().some((t=>t.name===e||"--all"===e)))return void t.write(d);const n=[];return new Promise((o=>{var r,i,s;for(const o of c.pol.getServices()){if("--all"!==e&&o.name!==e)continue;let l=()=>{};const p=c.pol.get(o.name);n.push(new Promise((e=>l=e))),c.pol.stateInit(o.name);try{if(c.pol.getAllRunning().some((e=>e.name===o.name))){t.write(`[${u.term.fc.yellow} WARN ${u.term.mc.resetAll}] ${o.name} is already running ...`),l();continue}(null===(r=p.setup)||void 0===r?void 0:r.onStart)?(process.env=Object.assign(Object.assign({},m),{POL:`__POL__${o.name}__${c.pol.getNanoSecTime()}__POL__`}),t.write(`[${u.term.fc.green}  OK  ${u.term.mc.resetAll}] start ${o.name} ...`),p.setup.onStart(p.setup.ssOnStart).then((()=>{c.pol.startRunChecker(o.name,"after","onStart","started",a.logFile)})),c.pol.startRunChecker(o.name,"before","onStart","started",t,l)):l()}catch(e){t.write(`[${u.term.fc.red}FAILED${u.term.mc.resetAll}] start ${o.name} ...`),t.write(`        ${e.stack}`),null===(s=null===(i=c.pol.get(o.name))||void 0===i?void 0:i.startResolver)||void 0===s||s.call(i)}}Promise.all(n).then((()=>{o(!0)}))}))})),S=(e,t,n)=>o(void 0,void 0,void 0,(function*(){if(!c.pol.getServices().some((t=>t.name===e||"--all"===e)))return void t.write(d);if(!c.pol.getAllRunning().some((t=>t.name===e))&&"--all"!==e)return void t.write(`[${u.term.fc.yellow} WARN ${u.term.mc.resetAll}] ${e} is already stopped ...`);if("--all"===e)for(const e of c.pol.getServices())c.pol.setStateDown(e.name);else c.pol.setStateDown(e);const r=[];return new Promise((i=>o(void 0,void 0,void 0,(function*(){var s;for(const i of c.pol.getAllRunning())if("--all"===e||e===i.name){let e=()=>{},l=()=>{},p=()=>{};const d=[new Promise((e=>l=e)),new Promise((e=>p=e))],g=e=>o(void 0,void 0,void 0,(function*(){var o,r;const i=[...Object.values(e.cli.before_onStart).map((e=>e.promise)),...Object.values(e.cli.after_onStart).map((e=>e.promise)),...Object.values(e.cli.before_onStop).map((e=>e.promise)),...Object.values(e.cli.after_onStop).map((e=>e.promise)),null===(o=e.exec.onStart)||void 0===o?void 0:o.promise,null===(r=e.exec.onLogin)||void 0===r?void 0:r.promise];let s="";c.pol.stopRunChecker(e.name,"Start");for(const o of e.processes){let r=a.TASK_INDENT;s!==e.name&&(s=e.name,r=`[${u.term.fc.green} STOP ${u.term.mc.resetAll}]`);const i=n?["kill","-9",o.procId]:["kill",o.procId],{c:l}=yield(0,a.cliSplitByLine)(...i);0==l&&t.write(`${r} ${e.name} service with proc/pid[${o.procName}/${o.procId}] ...`)}yield Promise.all(i)}));r.push(new Promise((t=>e=t)));try{(null===(s=i.setup)||void 0===s?void 0:s.onStop)?(i.setup.ssOnStop.stopAll=()=>o(void 0,void 0,void 0,(function*(){yield g(i),c.pol.setStateStop(i.name),c.pol.startRunChecker(i.name,"after","onStop","stopped",t,p)})),i.setup.onStop(i.setup.ssOnStop),c.pol.startRunChecker(i.name,"before","onStop","stopped",t,l)):(yield g(i),l(),p()),Promise.all(d).then((()=>{e(),setTimeout((()=>{c.pol.setStateReady(i.name)}))}))}catch(n){t.write(`[${u.term.fc.red}FAILED${u.term.mc.resetAll}] stop ${i.name} ...`),e()}}if("--all"===e)for(const e of c.pol.getAllStopped())t.write(`[${u.term.fc.yellow} WARN ${u.term.mc.resetAll}] ${e.name} is already stopped ...`);Promise.all(r).then((()=>{i()}))}))))}));switch(e._[0]){case"boot":if(c.pol.running&&(a.log.log("Another pol daemon is running!"),process.exit(1)),yield(0,p.serverCreate)(((e,t)=>o(void 0,void 0,void 0,(function*(){switch(e._[0]){case"stop":!e._.length||e._.length<2&&!e.all?(t.write(d),t.end()):(yield _(),yield S(e._[1]?e._[1]:e.all?"--all":null,t,e.force),t.end());break;case"start":!e._.length||e._.length<2&&!e.all?(t.write(d),t.end()):(yield _(),yield b(e._[1]?e._[1]:e.all?"--all":null,t),t.end());break;case"restart":!e._.length||e._.length<2&&!e.all?(t.write(d),t.end()):(yield _(),yield S(e._[1]?e._[1]:e.all?"--all":null,t,e.force),setTimeout((()=>o(void 0,void 0,void 0,(function*(){yield b(e._[1]?e._[1]:e.all?"--all":null,t),t.end()})))))}})))),yield b("--all",a.log),c.pol.getLoginService()){const e=()=>o(void 0,void 0,void 0,(function*(){yield _(),yield S("--all",a.log),(0,p.serverCleanup)()}));c.pol.isStateAfterDown(null===(t=c.pol.getLoginService())||void 0===t?void 0:t.name)?yield e():(process.env=Object.assign(Object.assign({},m),{POL:`__POL__${null===(n=c.pol.getLoginService())||void 0===n?void 0:n.name}__${c.pol.getNanoSecTime()}__POL__`}),null===(f=null===(s=null===(r=c.pol.getLoginService())||void 0===r?void 0:r.setup)||void 0===s?void 0:s.onLogin)||void 0===f||f.call(s,null===(h=null===(v=c.pol.getLoginService())||void 0===v?void 0:v.setup)||void 0===h?void 0:h.ssOnLogin).then((()=>o(void 0,void 0,void 0,(function*(){var t,n,r,i,s;(null===(t=c.pol.getLoginService())||void 0===t?void 0:t.exec.onLogin)?null===(s=null===(i=null===(r=null===(n=c.pol.getLoginService())||void 0===n?void 0:n.exec)||void 0===r?void 0:r.onLogin)||void 0===i?void 0:i.promise)||void 0===s||s.then((()=>o(void 0,void 0,void 0,(function*(){yield e()})))):yield e()})))))}break;case"completion":if("zsh"===e._[1]&&process.env.ZSH&&process.env.ZSH.endsWith(".oh-my-zsh")){const e=`${process.env.ZSH}/custom/plugins/pol`;yield(0,a.cliSplitByLine)("mkdir","-p",`${e}`),yield(0,a.cliSplitByLine)("cp",`${__dirname}/../zsh-plugin/pol.plugin.zsh`,`${e}/pol.plugin.zsh`),yield(0,a.cliSplitByLine)("cp",`${__dirname}/../zsh-plugin/plugin.js`,`${e}/plugin.js`),a.log.log(`[${u.term.fc.green}  INFO  ${u.term.mc.resetAll}] .oh-my-zsh custom plugin installed. Please add 'pol' to enabled plugin list in '~/.zshrc' file.`)}break;case"ps":let i="";for(const e of c.pol.getAllRunning())for(const t of e.processes){let n=a.TASK_INDENT;i!==e.name&&(i=e.name,n=`[${u.term.fc.green} RUN ${u.term.mc.resetAll}] `),a.log.log(n,e.name,`service with proc/pid[${t.procName}/${t.procId}] ...`)}if(e.all)for(const e of c.pol.getAllStopped())a.log.log(`[${u.term.fc.yellow} STOP ${u.term.mc.resetAll}]`,e.name,"service ...");break;case"stop":case"start":case"restart":(yield(0,p.clientCreate)()).write(JSON.stringify(e));break;default:(0,l.help)()}}))},302:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function l(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreate=t.clientCleanup=t.serverCreate=t.serverCleanup=void 0;const i=r(n(358)),s=r(n(808)),l=n(238),c=n(473),a={},p=e=>{(0,c.msgToLog)(e,"pol   ")};var u,d,g=!1;const m="/tmp/pol.sock";t.serverCleanup=()=>{if(!g&&u){if(g=!0,p("Socket server: terminating"),Object.keys(a).length){let e=Object.keys(a);for(;e.length;){let t=e.pop();a[t].end()}}u.close()}},t.serverCreate=(e=((e,t)=>o(void 0,void 0,void 0,(function*(){}))))=>o(void 0,void 0,void 0,(function*(){return p("Socket server: checking for leftover socket"),i.default.existsSync(m)?(p("Socket server: removing leftover socket."),i.default.unlinkSync(m)):p("Socket server: no leftover socket found."),process.on("exit",t.serverCleanup),function(e,t=((e,t)=>o(this,void 0,void 0,(function*(){})))){let n;return p("Socket server: creating"),new Promise((r=>{u=s.default.createServer((function(e){p("Socket server: connection acknowledged");var n=Date.now().toString();a[n]=e,e.on("end",(function(){p("Socket server: client disconnected"),delete a[n]})),e.on("data",(e=>o(this,void 0,void 0,(function*(){const o=JSON.parse(e.toString());t(o,a[n])})))),e.on("error",(e=>o(this,void 0,void 0,(function*(){delete a[n]}))))})).listen(e).on("connection",(function(e){p("Socket server: client connected"),n=e})),r()}))}(m,e)})),t.clientCleanup=()=>{!g&&d&&(g=!0,d.end())},t.clientCreate=()=>(process.on("exit",t.clientCleanup),new Promise((e=>{d=s.default.createConnection(m).on("connect",(()=>{e(d)})).on("data",(function(e){const t=e.toString();l.log.log(t)})).on("error",(function(e){l.log.log("pol daemon not running. run `pol boot` first!"),process.exit(1)})).on("close",(function(e){}))})))},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.term=void 0;const n={stdout:process.stdout,print:function(e=""){return n.stdout.write(e),n},bold:function(e,t=""){return n.print(n.mc.bold+t+e+n.mc.resetAll)},italic:function(e,t=""){return n.print(n.mc.italic+t+e+n.mc.resetAll)},underline:function(e,t=""){return n.print(n.mc.underline+t+e+n.mc.resetAll)},inverse:function(e,t=""){return n.print(n.mc.inverse+t+e+n.mc.resetAll)},strike:function(e,t=""){return n.print(n.mc.strike+t+e+n.mc.resetAll)},defaultColor:function(e){return n.print(n.fc.defaultColor+e+n.mc.resetAll)},black:function(e){return n.print(n.fc.black+e+n.mc.resetAll)},red:function(e){return n.print(n.fc.red+e+n.mc.resetAll)},green:function(e){return n.print(n.fc.green+e+n.mc.resetAll)},yellow:function(e){return n.print(n.fc.yellow+e+n.mc.resetAll)},blue:function(e){return n.print(n.fc.blue+e+n.mc.resetAll)},magenta:function(e){return n.print(n.fc.magenta+e+n.mc.resetAll)},cyan:function(e){return n.print(n.fc.cyan+e+n.mc.resetAll)},white:function(e){return n.print(n.fc.white+e+n.mc.resetAll)},brightBlack:function(e){return n.print(n.fc.brightBlack+e+n.mc.resetAll)},brightRed:function(e){return n.print(n.fc.brightRed+e+n.mc.resetAll)},brightGreen:function(e){return n.print(n.fc.brightGreen+e+n.mc.resetAll)},brightYellow:function(e){return n.print(n.fc.brightYellow+e+n.mc.resetAll)},brightBlue:function(e){return n.print(n.fc.brightBlue+e+n.mc.resetAll)},brightMagenta:function(e){return n.print(n.fc.brightMagenta+e+n.mc.resetAll)},brightCyan:function(e){return n.print(n.fc.brightCyan+e+n.mc.resetAll)},brightWhite:function(e){return n.print(n.fc.brightWhite+e+n.mc.resetAll)},customColor:function(e,t){const o=isNaN(e)?e:`[38;5;${e}m`;return n.print(o+t+n.mc.resetAll)},bgDefaultColor:function(e,t=""){return n.print(n.fc.brightWhite+t+e+n.mc.resetAll)},bgBlack:function(e,t=""){return n.print(n.bc.black+t+e+n.mc.resetAll)},bgRed:function(e,t=""){return n.print(n.bc.red+t+e+n.mc.resetAll)},bgGreen:function(e,t=""){return n.print(n.bc.green+t+e+n.mc.resetAll)},bgYellow:function(e,t=""){return n.print(n.bc.yellow+t+e+n.mc.resetAll)},bgBlue:function(e,t=""){return n.print(n.bc.blue+t+e+n.mc.resetAll)},bgMagenta:function(e,t=""){return n.print(n.bc.magenta+t+e+n.mc.resetAll)},bgCyan:function(e,t=""){return n.print(n.bc.cyan+t+e+n.mc.resetAll)},bgWhite:function(e,t=""){return n.print(n.bc.white+t+e+n.mc.resetAll)},bgBrightBlack:function(e,t=""){return n.print(n.bc.brightBlack+t+e+n.mc.resetAll)},bgBrightRed:function(e,t=""){return n.print(n.bc.brightRed+t+e+n.mc.resetAll)},bgBrightGreen:function(e,t=""){return n.print(n.bc.brightGreen+t+e+n.mc.resetAll)},bgBrightYellow:function(e,t=""){return n.print(n.bc.brightYellow+t+e+n.mc.resetAll)},bgBrightBlue:function(e,t=""){return n.print(n.bc.brightBlue+t+e+n.mc.resetAll)},bgBrightMagenta:function(e,t=""){return n.print(n.bc.brightMagenta+t+e+n.mc.resetAll)},bgBrightCyan:function(e,t=""){return n.print(n.bc.brightCyan+t+e+n.mc.resetAll)},bgBrightWhite:function(e,t=""){return n.print(n.bc.brightWhite+t+e+n.mc.resetAll)},customBgColor:function(e,t,o=""){const r=isNaN(e)?e.toString():`[48;5;${e}m`,i=isNaN(e)?e.toString():`[38;5;${e}m`;return n.print(r+i+t+n.mc.resetAll)},mc:{resetAll:"[0m[39m[49m",clearLineCursorRight:"[K",clearLine:"[2K",styleReset:"[0m",bold:"[1m",italic:"[3m",underline:"[4m",inverse:"[7m",strike:"[9m",cursorHide:"[?25l",cursorShow:"[?25h"},fc:{defaultColor:"[39m",black:"[30m",red:"[31m",green:"[32m",yellow:"[33m",blue:"[34m",magenta:"[35m",cyan:"[36m",white:"[37m",brightBlack:"[90m",brightRed:"[91m",brightGreen:"[92m",brightYellow:"[93m",brightBlue:"[94m",brightMagenta:"[95m",brightCyan:"[96m",brightWhite:"[97m",customColor:function(e){return`[38;5;${e}m`}},bc:{defaultColor:"[49m",black:"[40m",red:"[41m",green:"[42m",yellow:"[43m",blue:"[44m",magenta:"[45m",cyan:"[46m",white:"[47m",brightBlack:"[100m",brightRed:"[101m",brightGreen:"[102m",brightYellow:"[103m",brightBlue:"[104m",brightMagenta:"[105m",brightCyan:"[106m",brightWhite:"[107m",customBgColor:function(e){return`[48;5;${e}m`}}};t.term=n},45:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.printUsage=void 0;const o=n(522),r="    ",i="\n",s=(e="")=>void 0!==e&&e.length?e:void 0,l=(e,t=[],n)=>{t.length&&s(t[0].name)&&(o.term.print(o.term.mc.bold+i+e),t.forEach((e=>{o.term.print(o.term.mc.resetAll),n&&o.term.print(o.term.fc.brightWhite+o.term.mc.bold),o.term.print(`${r+e.name}`);const t=s(e.desc);t&&(o.term.print(o.term.mc.resetAll).print("\n"),o.term.print(`${r}${r}${t}`)),o.term.print(o.term.mc.resetAll).print("\n")})))};t.printUsage=(e={name:"",usage:[{name:"",desc:""}],options:[{switch:"",desc:"",type:""}],commands:[{switch:"",desc:""}],copyright:"copyright@2020",version:"0.0.1"})=>{if(l("NAME\n",[{name:e.name}]),l("USAGE\n",e.usage,!0),e.options&&e.options.length){let t=!1;e.options.forEach((e=>{e.switch.length&&(t||(t=!0,o.term.print(o.term.mc.bold+i+"OPTIONS\n"+o.term.mc.resetAll)),o.term.print(`${o.term.fc.brightWhite+o.term.mc.bold}${r+e.switch}\n`),o.term.print(`${o.term.mc.resetAll}${r}${r}${e.desc}`),e.type&&o.term.print(`${o.term.fc.cyan} [${e.type}]`),o.term.print("\n"))}))}if(e.commands&&e.commands.length){let t=!1;e.commands.forEach((e=>{e.switch.length&&(t||(t=!0,o.term.print(o.term.mc.bold+i+"COMMANDS\n"+o.term.mc.resetAll)),o.term.print(`${o.term.fc.brightWhite+o.term.mc.bold}${r+e.switch}\n`),o.term.print(`${o.term.mc.resetAll}${r}${r}${e.desc}`),o.term.print("\n"))}))}o.term.print(i),(e.version&&e.version.length||e.copyright&&e.copyright.length)&&o.term.print("== "),e.version&&e.version.length&&o.term.print(`v${e.version}`),e.copyright&&e.copyright.length&&(e.version&&e.version.length&&o.term.print(" - "),o.term.print(e.copyright)),(e.version&&e.version.length||e.copyright&&e.copyright.length)&&o.term.print(" ==\n\n")}},81:e=>{e.exports=require("child_process")},358:e=>{e.exports=require("fs")},808:e=>{e.exports=require("net")},37:e=>{e.exports=require("os")},147:e=>{e.exports=JSON.parse('{"name":"process-list-manager","version":"1.1.3","description":"Nodejs based init system called process list manager - pol","bin":{"pol":"./bin/pol.js"},"scripts":{"build":"webpack --mode production","test":"echo test missing!"},"author":"ui3o.com","license":"ISC","dependencies":{"minimist":"^1.2.8"},"devDependencies":{"@types/minimist":"^1.2.3","@types/node":"^20.7.0","ts-loader":"^9.4.4","ts-node":"^10.9.1","typescript":"^5.2.2","webpack":"^5.88.2","webpack-cli":"^5.1.4","webpack-shebang-plugin":"^1.1.8"}}')}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(757)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzVDLFFBQXFCeFcsSUFBakJ5VyxFQUNILE9BQU9BLEVBQWF6WSxRQUdyQixJQUFJRCxFQUFTdVksRUFBeUJFLEdBQVksQ0FHakR4WSxRQUFTLENBQUMsR0FPWCxPQUhBMFksRUFBb0JGLEdBQVVHLEtBQUs1WSxFQUFPQyxRQUFTRCxFQUFRQSxFQUFPQyxRQUFTdVksR0FHcEV4WSxFQUFPQyxPQUNmLENDbkIwQnVZLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci8uL25vZGVfbW9kdWxlcy9taW5pbWlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci8uL2VudHJ5L3BvbC50cyIsIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci8uL3NyYy9kYWVtb24udHMiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvLi9zcmMvZ2xvYmFsLnRzIiwid2VicGFjazovL3Byb2Nlc3MtbGlzdC1tYW5hZ2VyLy4vc3JjL2xvZ2dlci50cyIsIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci8uL3NyYy9wb2wudHMiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvLi9zcmMvc29ja2V0LnRzIiwid2VicGFjazovL3Byb2Nlc3MtbGlzdC1tYW5hZ2VyLy4vc3JjL3Rlcm0udHMiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvLi9zcmMvdXNhZ2UudHMiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImNoaWxkX3Byb2Nlc3NcIiIsIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiZnNcIiIsIndlYnBhY2s6Ly9wcm9jZXNzLWxpc3QtbWFuYWdlci9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibmV0XCIiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm9zXCIiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJvY2Vzcy1saXN0LW1hbmFnZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaGFzS2V5KG9iaiwga2V5cykge1xuXHR2YXIgbyA9IG9iajtcblx0a2V5cy5zbGljZSgwLCAtMSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0byA9IG9ba2V5XSB8fCB7fTtcblx0fSk7XG5cblx0dmFyIGtleSA9IGtleXNba2V5cy5sZW5ndGggLSAxXTtcblx0cmV0dXJuIGtleSBpbiBvO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcih4KSB7XG5cdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHsgcmV0dXJuIHRydWU7IH1cblx0aWYgKCgvXjB4WzAtOWEtZl0rJC9pKS50ZXN0KHgpKSB7IHJldHVybiB0cnVlOyB9XG5cdHJldHVybiAoL15bLStdPyg/OlxcZCsoPzpcXC5cXGQqKT98XFwuXFxkKykoZVstK10/XFxkKyk/JC8pLnRlc3QoeCk7XG59XG5cbmZ1bmN0aW9uIGlzQ29uc3RydWN0b3JPclByb3RvKG9iaiwga2V5KSB7XG5cdHJldHVybiAoa2V5ID09PSAnY29uc3RydWN0b3InICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gJ2Z1bmN0aW9uJykgfHwga2V5ID09PSAnX19wcm90b19fJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJncywgb3B0cykge1xuXHRpZiAoIW9wdHMpIHsgb3B0cyA9IHt9OyB9XG5cblx0dmFyIGZsYWdzID0ge1xuXHRcdGJvb2xzOiB7fSxcblx0XHRzdHJpbmdzOiB7fSxcblx0XHR1bmtub3duRm46IG51bGwsXG5cdH07XG5cblx0aWYgKHR5cGVvZiBvcHRzLnVua25vd24gPT09ICdmdW5jdGlvbicpIHtcblx0XHRmbGFncy51bmtub3duRm4gPSBvcHRzLnVua25vd247XG5cdH1cblxuXHRpZiAodHlwZW9mIG9wdHMuYm9vbGVhbiA9PT0gJ2Jvb2xlYW4nICYmIG9wdHMuYm9vbGVhbikge1xuXHRcdGZsYWdzLmFsbEJvb2xzID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHRbXS5jb25jYXQob3B0cy5ib29sZWFuKS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRmbGFncy5ib29sc1trZXldID0gdHJ1ZTtcblx0XHR9KTtcblx0fVxuXG5cdHZhciBhbGlhc2VzID0ge307XG5cblx0ZnVuY3Rpb24gYWxpYXNJc0Jvb2xlYW4oa2V5KSB7XG5cdFx0cmV0dXJuIGFsaWFzZXNba2V5XS5zb21lKGZ1bmN0aW9uICh4KSB7XG5cdFx0XHRyZXR1cm4gZmxhZ3MuYm9vbHNbeF07XG5cdFx0fSk7XG5cdH1cblxuXHRPYmplY3Qua2V5cyhvcHRzLmFsaWFzIHx8IHt9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRhbGlhc2VzW2tleV0gPSBbXS5jb25jYXQob3B0cy5hbGlhc1trZXldKTtcblx0XHRhbGlhc2VzW2tleV0uZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuXHRcdFx0YWxpYXNlc1t4XSA9IFtrZXldLmNvbmNhdChhbGlhc2VzW2tleV0uZmlsdGVyKGZ1bmN0aW9uICh5KSB7XG5cdFx0XHRcdHJldHVybiB4ICE9PSB5O1xuXHRcdFx0fSkpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRbXS5jb25jYXQob3B0cy5zdHJpbmcpLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRmbGFncy5zdHJpbmdzW2tleV0gPSB0cnVlO1xuXHRcdGlmIChhbGlhc2VzW2tleV0pIHtcblx0XHRcdFtdLmNvbmNhdChhbGlhc2VzW2tleV0pLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0XHRcdFx0ZmxhZ3Muc3RyaW5nc1trXSA9IHRydWU7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG5cdHZhciBkZWZhdWx0cyA9IG9wdHMuZGVmYXVsdCB8fCB7fTtcblxuXHR2YXIgYXJndiA9IHsgXzogW10gfTtcblxuXHRmdW5jdGlvbiBhcmdEZWZpbmVkKGtleSwgYXJnKSB7XG5cdFx0cmV0dXJuIChmbGFncy5hbGxCb29scyAmJiAoL14tLVtePV0rJC8pLnRlc3QoYXJnKSlcblx0XHRcdHx8IGZsYWdzLnN0cmluZ3Nba2V5XVxuXHRcdFx0fHwgZmxhZ3MuYm9vbHNba2V5XVxuXHRcdFx0fHwgYWxpYXNlc1trZXldO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0S2V5KG9iaiwga2V5cywgdmFsdWUpIHtcblx0XHR2YXIgbyA9IG9iajtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHR2YXIga2V5ID0ga2V5c1tpXTtcblx0XHRcdGlmIChpc0NvbnN0cnVjdG9yT3JQcm90byhvLCBrZXkpKSB7IHJldHVybjsgfVxuXHRcdFx0aWYgKG9ba2V5XSA9PT0gdW5kZWZpbmVkKSB7IG9ba2V5XSA9IHt9OyB9XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG9ba2V5XSA9PT0gT2JqZWN0LnByb3RvdHlwZVxuXHRcdFx0XHR8fCBvW2tleV0gPT09IE51bWJlci5wcm90b3R5cGVcblx0XHRcdFx0fHwgb1trZXldID09PSBTdHJpbmcucHJvdG90eXBlXG5cdFx0XHQpIHtcblx0XHRcdFx0b1trZXldID0ge307XG5cdFx0XHR9XG5cdFx0XHRpZiAob1trZXldID09PSBBcnJheS5wcm90b3R5cGUpIHsgb1trZXldID0gW107IH1cblx0XHRcdG8gPSBvW2tleV07XG5cdFx0fVxuXG5cdFx0dmFyIGxhc3RLZXkgPSBrZXlzW2tleXMubGVuZ3RoIC0gMV07XG5cdFx0aWYgKGlzQ29uc3RydWN0b3JPclByb3RvKG8sIGxhc3RLZXkpKSB7IHJldHVybjsgfVxuXHRcdGlmIChcblx0XHRcdG8gPT09IE9iamVjdC5wcm90b3R5cGVcblx0XHRcdHx8IG8gPT09IE51bWJlci5wcm90b3R5cGVcblx0XHRcdHx8IG8gPT09IFN0cmluZy5wcm90b3R5cGVcblx0XHQpIHtcblx0XHRcdG8gPSB7fTtcblx0XHR9XG5cdFx0aWYgKG8gPT09IEFycmF5LnByb3RvdHlwZSkgeyBvID0gW107IH1cblx0XHRpZiAob1tsYXN0S2V5XSA9PT0gdW5kZWZpbmVkIHx8IGZsYWdzLmJvb2xzW2xhc3RLZXldIHx8IHR5cGVvZiBvW2xhc3RLZXldID09PSAnYm9vbGVhbicpIHtcblx0XHRcdG9bbGFzdEtleV0gPSB2YWx1ZTtcblx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob1tsYXN0S2V5XSkpIHtcblx0XHRcdG9bbGFzdEtleV0ucHVzaCh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9bbGFzdEtleV0gPSBbb1tsYXN0S2V5XSwgdmFsdWVdO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHNldEFyZyhrZXksIHZhbCwgYXJnKSB7XG5cdFx0aWYgKGFyZyAmJiBmbGFncy51bmtub3duRm4gJiYgIWFyZ0RlZmluZWQoa2V5LCBhcmcpKSB7XG5cdFx0XHRpZiAoZmxhZ3MudW5rbm93bkZuKGFyZykgPT09IGZhbHNlKSB7IHJldHVybjsgfVxuXHRcdH1cblxuXHRcdHZhciB2YWx1ZSA9ICFmbGFncy5zdHJpbmdzW2tleV0gJiYgaXNOdW1iZXIodmFsKVxuXHRcdFx0PyBOdW1iZXIodmFsKVxuXHRcdFx0OiB2YWw7XG5cdFx0c2V0S2V5KGFyZ3YsIGtleS5zcGxpdCgnLicpLCB2YWx1ZSk7XG5cblx0XHQoYWxpYXNlc1trZXldIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG5cdFx0XHRzZXRLZXkoYXJndiwgeC5zcGxpdCgnLicpLCB2YWx1ZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRPYmplY3Qua2V5cyhmbGFncy5ib29scykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0c2V0QXJnKGtleSwgZGVmYXVsdHNba2V5XSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBkZWZhdWx0c1trZXldKTtcblx0fSk7XG5cblx0dmFyIG5vdEZsYWdzID0gW107XG5cblx0aWYgKGFyZ3MuaW5kZXhPZignLS0nKSAhPT0gLTEpIHtcblx0XHRub3RGbGFncyA9IGFyZ3Muc2xpY2UoYXJncy5pbmRleE9mKCctLScpICsgMSk7XG5cdFx0YXJncyA9IGFyZ3Muc2xpY2UoMCwgYXJncy5pbmRleE9mKCctLScpKTtcblx0fVxuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBhcmcgPSBhcmdzW2ldO1xuXHRcdHZhciBrZXk7XG5cdFx0dmFyIG5leHQ7XG5cblx0XHRpZiAoKC9eLS0uKz0vKS50ZXN0KGFyZykpIHtcblx0XHRcdC8vIFVzaW5nIFtcXHNcXFNdIGluc3RlYWQgb2YgLiBiZWNhdXNlIGpzIGRvZXNuJ3Qgc3VwcG9ydCB0aGVcblx0XHRcdC8vICdkb3RhbGwnIHJlZ2V4IG1vZGlmaWVyLiBTZWU6XG5cdFx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMDY4MzA4LzEzMjE2XG5cdFx0XHR2YXIgbSA9IGFyZy5tYXRjaCgvXi0tKFtePV0rKT0oW1xcc1xcU10qKSQvKTtcblx0XHRcdGtleSA9IG1bMV07XG5cdFx0XHR2YXIgdmFsdWUgPSBtWzJdO1xuXHRcdFx0aWYgKGZsYWdzLmJvb2xzW2tleV0pIHtcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZSAhPT0gJ2ZhbHNlJztcblx0XHRcdH1cblx0XHRcdHNldEFyZyhrZXksIHZhbHVlLCBhcmcpO1xuXHRcdH0gZWxzZSBpZiAoKC9eLS1uby0uKy8pLnRlc3QoYXJnKSkge1xuXHRcdFx0a2V5ID0gYXJnLm1hdGNoKC9eLS1uby0oLispLylbMV07XG5cdFx0XHRzZXRBcmcoa2V5LCBmYWxzZSwgYXJnKTtcblx0XHR9IGVsc2UgaWYgKCgvXi0tLisvKS50ZXN0KGFyZykpIHtcblx0XHRcdGtleSA9IGFyZy5tYXRjaCgvXi0tKC4rKS8pWzFdO1xuXHRcdFx0bmV4dCA9IGFyZ3NbaSArIDFdO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXh0ICE9PSB1bmRlZmluZWRcblx0XHRcdFx0JiYgISgvXigtfC0tKVteLV0vKS50ZXN0KG5leHQpXG5cdFx0XHRcdCYmICFmbGFncy5ib29sc1trZXldXG5cdFx0XHRcdCYmICFmbGFncy5hbGxCb29sc1xuXHRcdFx0XHQmJiAoYWxpYXNlc1trZXldID8gIWFsaWFzSXNCb29sZWFuKGtleSkgOiB0cnVlKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHNldEFyZyhrZXksIG5leHQsIGFyZyk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH0gZWxzZSBpZiAoKC9eKHRydWV8ZmFsc2UpJC8pLnRlc3QobmV4dCkpIHtcblx0XHRcdFx0c2V0QXJnKGtleSwgbmV4dCA9PT0gJ3RydWUnLCBhcmcpO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXRBcmcoa2V5LCBmbGFncy5zdHJpbmdzW2tleV0gPyAnJyA6IHRydWUsIGFyZyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICgoL14tW14tXSsvKS50ZXN0KGFyZykpIHtcblx0XHRcdHZhciBsZXR0ZXJzID0gYXJnLnNsaWNlKDEsIC0xKS5zcGxpdCgnJyk7XG5cblx0XHRcdHZhciBicm9rZW4gPSBmYWxzZTtcblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGV0dGVycy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRuZXh0ID0gYXJnLnNsaWNlKGogKyAyKTtcblxuXHRcdFx0XHRpZiAobmV4dCA9PT0gJy0nKSB7XG5cdFx0XHRcdFx0c2V0QXJnKGxldHRlcnNbal0sIG5leHQsIGFyZyk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoKC9bQS1aYS16XS8pLnRlc3QobGV0dGVyc1tqXSkgJiYgbmV4dFswXSA9PT0gJz0nKSB7XG5cdFx0XHRcdFx0c2V0QXJnKGxldHRlcnNbal0sIG5leHQuc2xpY2UoMSksIGFyZyk7XG5cdFx0XHRcdFx0YnJva2VuID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQoL1tBLVphLXpdLykudGVzdChsZXR0ZXJzW2pdKVxuXHRcdFx0XHRcdCYmICgvLT9cXGQrKFxcLlxcZCopPyhlLT9cXGQrKT8kLykudGVzdChuZXh0KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRzZXRBcmcobGV0dGVyc1tqXSwgbmV4dCwgYXJnKTtcblx0XHRcdFx0XHRicm9rZW4gPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGxldHRlcnNbaiArIDFdICYmIGxldHRlcnNbaiArIDFdLm1hdGNoKC9cXFcvKSkge1xuXHRcdFx0XHRcdHNldEFyZyhsZXR0ZXJzW2pdLCBhcmcuc2xpY2UoaiArIDIpLCBhcmcpO1xuXHRcdFx0XHRcdGJyb2tlbiA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2V0QXJnKGxldHRlcnNbal0sIGZsYWdzLnN0cmluZ3NbbGV0dGVyc1tqXV0gPyAnJyA6IHRydWUsIGFyZyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0a2V5ID0gYXJnLnNsaWNlKC0xKVswXTtcblx0XHRcdGlmICghYnJva2VuICYmIGtleSAhPT0gJy0nKSB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRhcmdzW2kgKyAxXVxuXHRcdFx0XHRcdCYmICEoL14oLXwtLSlbXi1dLykudGVzdChhcmdzW2kgKyAxXSlcblx0XHRcdFx0XHQmJiAhZmxhZ3MuYm9vbHNba2V5XVxuXHRcdFx0XHRcdCYmIChhbGlhc2VzW2tleV0gPyAhYWxpYXNJc0Jvb2xlYW4oa2V5KSA6IHRydWUpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHNldEFyZyhrZXksIGFyZ3NbaSArIDFdLCBhcmcpO1xuXHRcdFx0XHRcdGkgKz0gMTtcblx0XHRcdFx0fSBlbHNlIGlmIChhcmdzW2kgKyAxXSAmJiAoL14odHJ1ZXxmYWxzZSkkLykudGVzdChhcmdzW2kgKyAxXSkpIHtcblx0XHRcdFx0XHRzZXRBcmcoa2V5LCBhcmdzW2kgKyAxXSA9PT0gJ3RydWUnLCBhcmcpO1xuXHRcdFx0XHRcdGkgKz0gMTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZXRBcmcoa2V5LCBmbGFncy5zdHJpbmdzW2tleV0gPyAnJyA6IHRydWUsIGFyZyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFmbGFncy51bmtub3duRm4gfHwgZmxhZ3MudW5rbm93bkZuKGFyZykgIT09IGZhbHNlKSB7XG5cdFx0XHRcdGFyZ3YuXy5wdXNoKGZsYWdzLnN0cmluZ3MuXyB8fCAhaXNOdW1iZXIoYXJnKSA/IGFyZyA6IE51bWJlcihhcmcpKTtcblx0XHRcdH1cblx0XHRcdGlmIChvcHRzLnN0b3BFYXJseSkge1xuXHRcdFx0XHRhcmd2Ll8ucHVzaC5hcHBseShhcmd2Ll8sIGFyZ3Muc2xpY2UoaSArIDEpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0T2JqZWN0LmtleXMoZGVmYXVsdHMpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0XHRpZiAoIWhhc0tleShhcmd2LCBrLnNwbGl0KCcuJykpKSB7XG5cdFx0XHRzZXRLZXkoYXJndiwgay5zcGxpdCgnLicpLCBkZWZhdWx0c1trXSk7XG5cblx0XHRcdChhbGlhc2VzW2tdIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG5cdFx0XHRcdHNldEtleShhcmd2LCB4LnNwbGl0KCcuJyksIGRlZmF1bHRzW2tdKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG5cblx0aWYgKG9wdHNbJy0tJ10pIHtcblx0XHRhcmd2WyctLSddID0gbm90RmxhZ3Muc2xpY2UoKTtcblx0fSBlbHNlIHtcblx0XHRub3RGbGFncy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdFx0XHRhcmd2Ll8ucHVzaChrKTtcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiBhcmd2O1xufTtcbiIsIlwidXNlIHN0cmljdFwiXG5pbXBvcnQgbWluaW1pc3QgZnJvbSAnbWluaW1pc3QnO1xuaW1wb3J0IHBhY2thZ2VKc29uIGZyb20gXCIuLi9wYWNrYWdlLmpzb25cIjtcbmltcG9ydCB7IHBvbERhZW1vbiB9IGZyb20gXCIuLi9zcmMvcG9sXCI7XG5pbXBvcnQgeyBwcmludFVzYWdlIH0gZnJvbSBcIi4uL3NyYy91c2FnZVwiO1xuY29uc3QgYXJndj0gbWluaW1pc3QocHJvY2Vzcy5hcmd2LnNsaWNlKDIpKTtcblxuZXhwb3J0IGNvbnN0IGhlbHAgPSAoKSA9PiB7XG4gICAgcHJpbnRVc2FnZSh7XG4gICAgICAgIG5hbWU6ICdwb2wgLSBQcm9jZXNzIGxpc3QgbWFuYWdlci4nLFxuICAgICAgICB1c2FnZTogW1xuICAgICAgICAgICAgeyBuYW1lOiBgcG9sIFtvcHRpb25zXVtjb21tYW5kXWAsIGRlc2M6ICdQcm9jZXNzIGxpc3QgKHBvbCkgbWFuYWdlciBhY2NlcHRzIGNvbW1hbmQgYW5kIG9wdGlvbnMuJyB9XG4gICAgICAgIF0sXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgZGVzYzogJ3Nob3cgaGVscCcsIHN3aXRjaDogJy1oLCAtLWhlbHAnLCB0eXBlOiAnYm9vbGVhbicgfVxuICAgICAgICBdLFxuICAgICAgICBjb21tYW5kczogW1xuICAgICAgICAgICAgeyBkZXNjOiBcImJvb3QgaW5pdCBzeXN0ZW1cIiwgc3dpdGNoOiAnYm9vdCcgfSxcbiAgICAgICAgICAgIHsgZGVzYzogXCJzdGFydCBbc2VydmljZXwtLWFsbF1cIiwgc3dpdGNoOiAnc3RhcnQnIH0sXG4gICAgICAgICAgICB7IGRlc2M6IFwicmVzdGFydCBbc2VydmljZXwtLWFsbF1cIiwgc3dpdGNoOiAncmVzdGFydCcgfSxcbiAgICAgICAgICAgIHsgZGVzYzogXCJzdG9wIFtzZXJ2aWNlfC0tYWxsXVwiLCBzd2l0Y2g6ICdzdG9wJyB9LFxuICAgICAgICAgICAgeyBkZXNjOiBcImxpc3QgcnVubmluZyBbbm9uZXwtLWFsbF1cIiwgc3dpdGNoOiAncHMnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHZlcnNpb246IHBhY2thZ2VKc29uLnZlcnNpb24sXG4gICAgICAgIGNvcHlyaWdodDogJ2NvcHlyaWdodEAyMDIzJ1xuICAgIH0pO1xuICAgIHByb2Nlc3MuZXhpdCgwKTtcbn1cbmlmIChhcmd2LmggfHwgYXJndi5oZWxwKSB7XG4gICAgaGVscCgpO1xufVxuXG5wb2xEYWVtb24oYXJndik7IiwiaW1wb3J0IG5ldCBmcm9tICduZXQnO1xuaW1wb3J0IHsgbXNnVG9Mb2cgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyB0ZXJtIH0gZnJvbSBcIi4vdGVybVwiO1xuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBQT0xfU0VUVVAge1xuICAgIHNlcnZpY2VOYW1lPzogc3RyaW5nXG4gICAgc3NPblN0YXJ0OiBQT0xfU0VUVVBfU1RBUlRcbiAgICBzc09uU3RvcDogUE9MX1NFVFVQX1NUT1BcbiAgICBzc09uTG9naW46IFBPTF9TRVRVUF9TVEFSVFxuICAgIG9uU3RhcnQ/OiAoc3M6IFBPTF9TRVRVUF9TVEFSVCkgPT4gUHJvbWlzZTxhbnk+XG4gICAgb25TdG9wPzogKHNzOiBQT0xfU0VUVVBfU1RPUCkgPT4gUHJvbWlzZTxhbnk+XG4gICAgb25Mb2dpbj86IChzczogUE9MX1NFVFVQX1NUQVJUKSA9PiBQcm9taXNlPGFueT5cbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgUE9MX1NFVFVQX1NUQVJUIHtcbiAgICBjbGk6IFBPTF9TRVRVUF9DTElcbiAgICBleGVjOiBQT0xfU0VUVVBfRVhFQ1xuICAgIHRvTG9nPzogKHN0cjogc3RyaW5nKSA9PiBhbnlcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgUE9MX1NFVFVQX1NUT1Age1xuICAgIGNsaTogUE9MX1NFVFVQX0NMSVxuICAgIHN0b3BBbGw/OiAoKSA9PiBQcm9taXNlPHZvaWQ+XG4gICAgdG9Mb2c/OiAoc3RyOiBzdHJpbmcpID0+IGFueVxufVxuXG5leHBvcnQgdHlwZSBQT0xfQ0xCX01FVEhPRCA9ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWRcblxuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBQT0xfTE9HR0VSIHtcbiAgICB3cml0ZTogKC4uLmRhdGE6IGFueVtdKSA9PiBhbnlcbiAgICBsb2c6ICguLi5kYXRhOiBhbnlbXSkgPT4gYW55XG4gICAgd2FybjogKC4uLmRhdGE6IGFueVtdKSA9PiBhbnlcbiAgICBlcnI6ICguLi5kYXRhOiBhbnlbXSkgPT4gYW55XG4gICAgZW5kOiBQT0xfQ0xCX01FVEhPRFxufVxuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBQT0xfU0VUVVBfQ0xJIHtcbiAgICBub0Vycj86IFBPTF9TRVRVUF9DTElcbiAgICBzcGxpdEJ5TGluZT86IFBPTF9TRVRVUF9DTElcbiAgICBzcGxpdEFsbD86IFBPTF9TRVRVUF9DTElcbiAgICB3ZD86ICh3ZDogc3RyaW5nKSA9PiBQT0xfU0VUVVBfQ0xJXG4gICAgZ2lkPzogKGdpZDogc3RyaW5nKSA9PiBQT0xfU0VUVVBfQ0xJXG4gICAgdWlkPzogKHVpZDogc3RyaW5nKSA9PiBQT0xfU0VUVVBfQ0xJXG4gICAgZW9sPzogKGVvbDogc3RyaW5nKSA9PiBQT0xfU0VUVVBfQ0xJXG4gICAgZG8/OiBQT0xfQ0xCX01FVEhPRFxufVxuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBQT0xfU0VUVVBfRVhFQyB7XG4gICAgaXQ/OiBQT0xfU0VUVVBfRVhFQ1xuICAgIHdkPzogKHdkOiBzdHJpbmcpID0+IFBPTF9TRVRVUF9FWEVDXG4gICAgdWlkPzogKHVpZDogc3RyaW5nKSA9PiBQT0xfU0VUVVBfRVhFQ1xuICAgIGdpZD86IChnaWQ6IHN0cmluZykgPT4gUE9MX1NFVFVQX0VYRUNcbiAgICBkbz86IFBPTF9DTEJfTUVUSE9EXG59XG5cbmRlY2xhcmUgaW50ZXJmYWNlIFNFUlZJQ0VTX0RFRiB7XG4gICAgW25hbWU6IHN0cmluZ106IFNFUlZJQ0VfREVGXG59XG5cbmV4cG9ydCBkZWNsYXJlIGludGVyZmFjZSBTRVJWSUNFX0RFRiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgc2V0dXA/OiBQT0xfU0VUVVBcbiAgICBwYXRoPzogc3RyaW5nXG4gICAgcnVubmluZz86IGJvb2xlYW5cbiAgICBzdGFydGVkQXQ/OiBudW1iZXJcbiAgICBzdGFydFJlc29sdmVyPzogKCkgPT4gdm9pZFxuICAgIC8qKlxuICAgICAqIFNFUlZJQ0VfU1RBVEVfUkVBRFkgPSAwIC0tIGJlZm9yZU9uU3RhcnRcbiAgICAgKiBTRVJWSUNFX1NUQVRFX1VQID0gMSAtLSBhZnRlck9uU3RhcnRFeGVjXG4gICAgICogU0VSVklDRV9TVEFURV9ET1dOID0gMiAtLSBiZWZvcmVPblN0b3BcbiAgICAgKiBTRVJWSUNFX1NUQVRFX1NUT1AgPSAzIC0tIGFmdGVyU3RvcEFsbFxuICAgICAqL1xuICAgIHN0YXRlOiBudW1iZXJcbiAgICBwcm9jZXNzZXM6IEFycmF5PFJVTk5JTkdfUFJPQ0VTU19ERUY+XG4gICAgaW50ZXJ2YWw6IHtcbiAgICAgICAgYmVmb3JlX29uU3RhcnQ6IE5vZGVKUy5UaW1lb3V0IHwgdm9pZFxuICAgICAgICBhZnRlcl9vblN0YXJ0OiBOb2RlSlMuVGltZW91dCB8IHZvaWRcbiAgICAgICAgYmVmb3JlX29uU3RvcDogTm9kZUpTLlRpbWVvdXQgfCB2b2lkXG4gICAgICAgIGFmdGVyX29uU3RvcDogTm9kZUpTLlRpbWVvdXQgfCB2b2lkXG4gICAgfSxcbiAgICBjbGk6IENMSV9ERUYsXG4gICAgZXhlYzogRVhFQ19ERUZcbn1cblxuZGVjbGFyZSBpbnRlcmZhY2UgUlVOTklOR19QUk9DRVNTX0RFRiB7XG4gICAgcHJvY0lkOiBzdHJpbmdcbiAgICBwcm9jTmFtZTogc3RyaW5nXG59XG5cbmRlY2xhcmUgaW50ZXJmYWNlIEVYRUNfREVGIHtcbiAgICBvblN0YXJ0OiBTUEFXTl9ERUYgfCB1bmRlZmluZWRcbiAgICBvbkxvZ2luOiBTUEFXTl9ERUYgfCB1bmRlZmluZWRcbn1cblxuXG5kZWNsYXJlIGludGVyZmFjZSBDTElfREVGIHtcbiAgICBiZWZvcmVfb25TdGFydDogU1BBV05TX0RFRlxuICAgIGFmdGVyX29uU3RhcnQ6IFNQQVdOU19ERUZcbiAgICBiZWZvcmVfb25TdG9wOiBTUEFXTlNfREVGXG4gICAgYWZ0ZXJfb25TdG9wOiBTUEFXTlNfREVGXG4gICAgYmVmb3JlX29uTG9naW46IFNQQVdOU19ERUZcbiAgICBhZnRlcl9vbkxvZ2luOiBTUEFXTlNfREVGXG59XG5cbmRlY2xhcmUgaW50ZXJmYWNlIFNQQVdOU19ERUYge1xuICAgIFtuYW1lOiBzdHJpbmddOiBTUEFXTl9ERUZcblxufVxuXG5leHBvcnQgZGVjbGFyZSBpbnRlcmZhY2UgU1BBV05fREVGIHtcbiAgICBwcm9nPzogc3RyaW5nXG4gICAgcGFyYW1zPzogc3RyaW5nW11cbiAgICBwcm9taXNlPzogUHJvbWlzZTxhbnk+XG4gICAgb3B0aW9ucz86IGFueVxuICAgIHRpbWVzdGFtcD86IG51bWJlclxufVxuXG5cbmNsYXNzIFBvbERhZW1vbkNsYXNzIHtcblxuICAgIHByaXZhdGUgU0VSVklDRV9TVEFURSA9IHtcbiAgICAgICAgUkVBRFk6IHsgbmFtZTogXCJTRVJWSUNFX1NUQVRFX1JFQURZXCIsIHN0YXRlOiAwIH0sXG4gICAgICAgIFVQOiB7IG5hbWU6IFwiU0VSVklDRV9TVEFURV9VUFwiLCBzdGF0ZTogMSB9LFxuICAgICAgICBET1dOOiB7IG5hbWU6IFwiU0VSVklDRV9TVEFURV9ET1dOXCIsIHN0YXRlOiAyIH0sXG4gICAgICAgIFNUT1A6IHsgbmFtZTogXCJTRVJWSUNFX1NUQVRFX1NUT1BcIiwgc3RhdGU6IDMgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIGRlZmF1bHRzID0ge1xuICAgICAgICBDTElfUFJFX0lOVEVSVkFMOiA1MCxcbiAgICAgICAgQ0xJX0lOVEVSVkFMOiAyMDBcbiAgICB9O1xuXG5cbiAgICBwdWJsaWMgcnVubmluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgc3J2OiBTRVJWSUNFU19ERUYgPSB7fTtcbiAgICBwcml2YXRlIGxvZ2luU2VydmljZTogU0VSVklDRV9ERUYgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gICAgcHVibGljIGluaXQoc2VydmljZU5hbWU6IHN0cmluZywgcGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXSA9IHRoaXMuc3J2W3NlcnZpY2VOYW1lXSA/IHRoaXMuc3J2W3NlcnZpY2VOYW1lXSA6IHtcbiAgICAgICAgICAgIHByb2Nlc3NlczogW10sXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgbmFtZTogc2VydmljZU5hbWUsXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5TRVJWSUNFX1NUQVRFLlJFQURZLnN0YXRlLFxuICAgICAgICAgICAgaW50ZXJ2YWw6IHtcbiAgICAgICAgICAgICAgICBiZWZvcmVfb25TdGFydDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGFmdGVyX29uU3RhcnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBiZWZvcmVfb25TdG9wOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgYWZ0ZXJfb25TdG9wOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpOiB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJfb25TdGFydDoge30sXG4gICAgICAgICAgICAgICAgYmVmb3JlX29uU3RhcnQ6IHt9LFxuICAgICAgICAgICAgICAgIGFmdGVyX29uU3RvcDoge30sXG4gICAgICAgICAgICAgICAgYmVmb3JlX29uU3RvcDoge30sXG4gICAgICAgICAgICAgICAgYWZ0ZXJfb25Mb2dpbjoge30sXG4gICAgICAgICAgICAgICAgYmVmb3JlX29uTG9naW46IHt9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXhlYzoge1xuICAgICAgICAgICAgICAgIG9uU3RhcnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBvbkxvZ2luOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLnByb2Nlc3NlcyA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5zcnZbc2VydmljZU5hbWVdO1xuICAgIH1cblxuICAgIC8vIHN0YXJ0UnVuQ2hlY2tlcihzZXJ2aWNlLm5hbWUsICdiZWZvcmUnLCAnb25TdGFydCcsICdzdGFydGVkJywgbG9nZ2VyLCBzZXJ2aWNlU3RhcnRSZXNvbHZlcik7XG4gICAgc3RhcnRSdW5DaGVja2VyKHNlcnZpY2VOYW1lOiBzdHJpbmcsIHByZVBvc3RTdGF0ZTogJ2JlZm9yZScgfCAnYWZ0ZXInLCBzdGF0ZTogJ29uU3RhcnQnIHwgJ29uU3RvcCcsIG1zZyA9IFwiXCIsIGxvZ2dlcjogUE9MX0xPR0dFUiB8IG5ldC5Tb2NrZXQsIHJlc29sdmVyOiBQT0xfQ0xCX01FVEhPRCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5pbnRlcnZhbDtcbiAgICAgICAgY29uc3QgY2xpID0gdGhpcy5zcnZbc2VydmljZU5hbWVdLmNsaVtgJHtwcmVQb3N0U3RhdGV9XyR7c3RhdGV9YF07XG4gICAgICAgIGNvbnN0IHJ1blN0YXRlID0gc3RhdGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInN0YXJ0XCIpID8gXCJzdGFydFwiIDogXCJzdG9wXCI7XG5cbiAgICAgICAgaWYgKGAke3ByZVBvc3RTdGF0ZX1fJHtzdGF0ZX1gID09PSAnYmVmb3JlX29uU3RhcnQnICYmIHJlc29sdmVyKVxuICAgICAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLnN0YXJ0UmVzb2x2ZXIgPSByZXNvbHZlcjtcblxuICAgICAgICBjb25zdCBydW5DaGVja2VyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNsaSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnZhbFtgJHtwcmVQb3N0U3RhdGV9XyR7c3RhdGV9YF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxbYCR7cHJlUG9zdFN0YXRlfV8ke3N0YXRlfWBdID0gc2V0SW50ZXJ2YWwocnVuQ2hlY2tlciwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvZ2dlci53cml0ZShgICAgICAgICAgd2FpdGluZyAke3ByZVBvc3RTdGF0ZX0gJHtzZXJ2aWNlTmFtZX0gJHtydW5TdGF0ZX0gLi4uYCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpbnRlcnZhbFtgJHtwcmVQb3N0U3RhdGV9XyR7c3RhdGV9YF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxbYCR7cHJlUG9zdFN0YXRlfV8ke3N0YXRlfWBdID0gY2xlYXJJbnRlcnZhbChpbnRlcnZhbFtgJHtwcmVQb3N0U3RhdGV9XyR7c3RhdGV9YF0hKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndyaXRlKGBbJHt0ZXJtLmZjLmdyZWVufSAgT0sgICR7dGVybS5tYy5yZXNldEFsbH1dICR7c2VydmljZU5hbWV9IGlzICR7bXNnfSAuLi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyKSByZXNvbHZlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNsaSkubGVuZ3RoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bkNoZWNrZXIsIDUwMClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlcikgcmVzb2x2ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0b3BSdW5DaGVja2VyKHNlcnZpY2VOYW1lOiBzdHJpbmcsIHN0YWdlOiAnU3RhcnQnKSB7XG4gICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5zcnZbc2VydmljZU5hbWVdLmludGVydmFsO1xuXG4gICAgICAgIGlmIChpbnRlcnZhbFtgYmVmb3JlX29uJHtzdGFnZX1gXSB8fCBpbnRlcnZhbFtgYWZ0ZXJfb24ke3N0YWdlfWBdKSB7XG5cbiAgICAgICAgICAgIGlmIChpbnRlcnZhbFtgYmVmb3JlX29uJHtzdGFnZX1gXSkge1xuICAgICAgICAgICAgICAgIGludGVydmFsW2BiZWZvcmVfb24ke3N0YWdlfWBdID0gY2xlYXJJbnRlcnZhbChpbnRlcnZhbFtgYmVmb3JlX29uJHtzdGFnZX1gXSEpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNydltzZXJ2aWNlTmFtZV0uc3RhcnRSZXNvbHZlcikgdGhpcy5zcnZbc2VydmljZU5hbWVdLnN0YXJ0UmVzb2x2ZXI/LigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVydmFsW2BhZnRlcl9vbiR7c3RhZ2V9YF0pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbFtgYWZ0ZXJfb24ke3N0YWdlfWBdID0gY2xlYXJJbnRlcnZhbChpbnRlcnZhbFtgYWZ0ZXJfb24ke3N0YWdlfWBdISk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRSdW5uaW5nKHNlcnZpY2VOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLnJ1bm5pbmcgPSB0cnVlO1xuICAgIH1cblxuXG4gICAgYWRkUHJvY2VzcyhzZXJ2aWNlTmFtZTogc3RyaW5nLCBwcm9jSWQ6IHN0cmluZywgcHJvY05hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNydltzZXJ2aWNlTmFtZV0ucHJvY2Vzc2VzLnB1c2goeyBwcm9jSWQsIHByb2NOYW1lIH0pO1xuICAgIH1cblxuICAgIGFkZENsaShzZXJ2aWNlTmFtZTogc3RyaW5nLCBmdW5jTmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlciwgc3Bhd246IFNQQVdOX0RFRikge1xuICAgICAgICBzd2l0Y2ggKGZ1bmNOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdvblN0YXJ0JzpcbiAgICAgICAgICAgIGNhc2UgJ29uTG9naW4nOlxuICAgICAgICAgICAgY2FzZSAnb25TdG9wJzpcbiAgICAgICAgICAgICAgICBjb25zdCBhZnRlciA9IGZ1bmNOYW1lID09PSAnb25TdG9wJyA/IHBvbC5pc1N0YXRlU3RvcChzZXJ2aWNlTmFtZSkgOiB0aGlzLnNydltzZXJ2aWNlTmFtZV0uZXhlY1tmdW5jTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKGFmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5jbGlbYGFmdGVyXyR7ZnVuY05hbWV9YF1bYCR7dGltZXN0YW1wfWBdID0gc3Bhd247XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLmNsaVtgYmVmb3JlXyR7ZnVuY05hbWV9YF1bYCR7dGltZXN0YW1wfWBdID0gc3Bhd247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkRXhlYyhzZXJ2aWNlTmFtZTogc3RyaW5nLCBmdW5jTmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlciwgc3Bhd246IFNQQVdOX0RFRikge1xuICAgICAgICBzd2l0Y2ggKGZ1bmNOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdvblN0YXJ0JzpcbiAgICAgICAgICAgIGNhc2UgJ29uTG9naW4nOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNydltzZXJ2aWNlTmFtZV0uZXhlY1tmdW5jTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgIG1zZ1RvTG9nKGBub3QgcG9zc2libGUgdG8gZXhlY3V0ZSB0byBleGUgaW4gJHtmdW5jTmFtZX1gLCAncG9sICAgJywgc2VydmljZU5hbWUpXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNydltzZXJ2aWNlTmFtZV0uZXhlY1tmdW5jTmFtZV0gPSBzcGF3bjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbENsaShzZXJ2aWNlTmFtZTogc3RyaW5nLCBmdW5jTmFtZTogc3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlcikge1xuICAgICAgICBzd2l0Y2ggKGZ1bmNOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdvblN0YXJ0JzpcbiAgICAgICAgICAgIGNhc2UgJ29uU3RvcCc6XG4gICAgICAgICAgICBjYXNlICdvbkxvZ2luJzpcbiAgICAgICAgICAgICAgICBjb25zdCBpc0JlZm9yZSA9IE9iamVjdC5rZXlzKHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5jbGlbYGJlZm9yZV8ke2Z1bmNOYW1lfWBdKS5zb21lKGsgPT4gayA9PT0gYCR7dGltZXN0YW1wfWApO1xuICAgICAgICAgICAgICAgIGlmIChpc0JlZm9yZSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnNydltzZXJ2aWNlTmFtZV0uY2xpW2BiZWZvcmVfJHtmdW5jTmFtZX1gXSkuZm9yRWFjaChrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09PSBgJHt0aW1lc3RhbXB9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zcnZbc2VydmljZU5hbWVdLmNsaVtgYmVmb3JlXyR7ZnVuY05hbWV9YF1ba107XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5jbGlbYGFmdGVyXyR7ZnVuY05hbWV9YF0pLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0gYCR7dGltZXN0YW1wfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5jbGlbYGFmdGVyXyR7ZnVuY05hbWV9YF1ba107XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbEV4ZWMoc2VydmljZU5hbWU6IHN0cmluZywgZnVuY05hbWU6IHN0cmluZykge1xuICAgICAgICBzd2l0Y2ggKGZ1bmNOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdvblN0YXJ0JzpcbiAgICAgICAgICAgIGNhc2UgJ29uTG9naW4nOlxuICAgICAgICAgICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5leGVjW2Z1bmNOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFNldHVwKHNlcnZpY2VOYW1lOiBzdHJpbmcsIHNldHVwOiBQT0xfU0VUVVApIHtcbiAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLnNldHVwID0gc2V0dXA7XG4gICAgfVxuXG4gICAgc2V0TG9naW5TZXJ2aWNlKHNlcnZpY2VOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5sb2dpblNlcnZpY2UgPSB0aGlzLnNydltzZXJ2aWNlTmFtZV07XG4gICAgfVxuXG4gICAgZ2V0TG9naW5TZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dpblNlcnZpY2U7XG4gICAgfVxuXG4gICAgc3RhdGVJbml0KHNlcnZpY2VOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zcnZbc2VydmljZU5hbWVdLnN0YXRlID0gdGhpcy5TRVJWSUNFX1NUQVRFLlJFQURZLnN0YXRlO1xuICAgIH1cblxuICAgIGdldChzZXJ2aWNlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNydltzZXJ2aWNlTmFtZV07XG4gICAgfVxuXG4gICAgaXNTdGF0ZUFmdGVyRG93bihzZXJ2aWNlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNydltzZXJ2aWNlTmFtZV0uc3RhdGUgPj0gdGhpcy5TRVJWSUNFX1NUQVRFLkRPV04uc3RhdGU7XG4gICAgfVxuXG4gICAgaXNTdGF0ZVN0b3Aoc2VydmljZU5hbWU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zcnZbc2VydmljZU5hbWVdLnN0YXRlID09PSB0aGlzLlNFUlZJQ0VfU1RBVEUuU1RPUC5zdGF0ZTtcbiAgICB9XG5cblxuICAgIHNldFN0YXRlUmVhZHkoc2VydmljZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNydltzZXJ2aWNlTmFtZV0uc3RhdGUgPSB0aGlzLlNFUlZJQ0VfU1RBVEUuUkVBRFkuc3RhdGU7XG4gICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5ydW5uaW5nID0gZmFsc2U7XG5cbiAgICB9XG5cblxuICAgIHNldFN0YXRlRG93bihzZXJ2aWNlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5zdGF0ZSA9IHRoaXMuU0VSVklDRV9TVEFURS5ET1dOLnN0YXRlO1xuICAgIH1cblxuICAgIHNldFN0YXRlU3RvcChzZXJ2aWNlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3J2W3NlcnZpY2VOYW1lXS5zdGF0ZSA9IHRoaXMuU0VSVklDRV9TVEFURS5TVE9QLnN0YXRlO1xuICAgIH1cblxuICAgIGdldEFsbFJ1bm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2VzKCkuZmlsdGVyKHMgPT4gcy5ydW5uaW5nKVxuICAgIH1cblxuICAgIGdldEFsbFN0b3BwZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2VzKCkuZmlsdGVyKHMgPT4gIXMucnVubmluZylcbiAgICB9XG5cbiAgICBnZXRTZXJ2aWNlcygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5zcnYpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLm5hbWUudG9VcHBlckNhc2UoKSA8IGIubmFtZS50b1VwcGVyQ2FzZSgpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS5uYW1lLnRvVXBwZXJDYXNlKCkgPiBiLm5hbWUudG9VcHBlckNhc2UoKSkgcmV0dXJuIDE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0TmFub1NlY1RpbWUoKSB7XG4gICAgICAgIGNvbnN0IGhyVGltZSA9IHByb2Nlc3MuaHJ0aW1lKCk7XG4gICAgICAgIHJldHVybiBoclRpbWVbMF0gKiAxMDAwMDAwMDAwICsgaHJUaW1lWzFdO1xuICAgIH1cblxuXG59XG5cbmV4cG9ydCBjb25zdCBwb2wgPSBuZXcgUG9sRGFlbW9uQ2xhc3MoKTtcbiIsImltcG9ydCB7IHNwYXduLCBzcGF3blN5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGFja2FnZUpzb24gZnJvbSBcIi4uL3BhY2thZ2UuanNvblwiO1xuaW1wb3J0IHsgUE9MX0xPR0dFUiwgUE9MX1NFVFVQLCBQT0xfU0VUVVBfU1RBUlQsIFBPTF9TRVRVUF9TVE9QLCBwb2wgfSBmcm9tICcuL2RhZW1vbic7XG5pbXBvcnQgeyBMT0dfRklMRV9QQVRILCBMT0dfRklMRV9ST09ULCBtc2dUb0xvZyB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IHRlcm0gfSBmcm9tICcuL3Rlcm0nO1xuXG5cbi8vIGxvZyBzZXR1cFxuZXhwb3J0IGNvbnN0IFRBU0tfSU5ERU5UID0gYCAgICAgICAgYDtcbmV4cG9ydCBjb25zdCBsb2c6IFBPTF9MT0dHRVIgPSB7XG4gICAgd3JpdGU6IGNvbnNvbGUubG9nLFxuICAgIGxvZzogY29uc29sZS5sb2csXG4gICAgd2FybjogY29uc29sZS53YXJuLFxuICAgIGVycjogY29uc29sZS5lcnJvcixcbiAgICBlbmQ6ICgpID0+IHsgfVxufTtcblxuXG4vLyBsb2cgZmlsZSBzZXR1cFxuZnVuY3Rpb24gY2xpKC4uLmFyZ3M6IHN0cmluZ1tdKSB7XG4gICAgY29uc3QgY21kID0gWy4uLmFyZ3VtZW50c107XG4gICAgc3Bhd25TeW5jKGNtZC5zaGlmdCgpLCBbLi4uY21kXSwgeyBlbmNvZGluZzogJ3V0Zi04Jywgc3RkaW86ICdpZ25vcmUnIH0pO1xufVxuaWYgKCFmcy5leGlzdHNTeW5jKExPR19GSUxFX1BBVEgpKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZnMuYWNjZXNzU3luYyhMT0dfRklMRV9ST09ULCBmcy5jb25zdGFudHMuUl9PSyB8IGZzLmNvbnN0YW50cy5XX09LIHwgZnMuY29uc3RhbnRzLlhfT0spO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZy5sb2coYFske3Rlcm0uZmMucmVkfVJFUVVJUkVEJHt0ZXJtLm1jLnJlc2V0QWxsfV0gUGxlYXNlIGNyZWF0ZSAnL3Zhci9sb2cvcG9sJyBmb2xkZXIgd2l0aCAncncnIGFjY2VzcyBmb3IgdGhlIHJ1bm5pbmcgdXNlciFgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICBjbGkoYHRvdWNoYCwgTE9HX0ZJTEVfUEFUSCk7XG59XG5cbi8vIHpzaCBwbHVnaW4gc2V0dXBcbmNvbnN0IHBvbFBsdWdpbkZvbGRlciA9IGAke3Byb2Nlc3MuZW52LlpTSH0vY3VzdG9tL3BsdWdpbnMvcG9sYDtcbmNvbnN0IHBvbFBsdWdpblZlcnNpb24gPSBgJHtwb2xQbHVnaW5Gb2xkZXJ9L3BvbC5wbHVnaW4uJHtwYWNrYWdlSnNvbi52ZXJzaW9ufS52ZXJzaW9uYDtcbmlmIChwcm9jZXNzLmVudi5aU0ggJiYgcHJvY2Vzcy5lbnYuWlNILmVuZHNXaXRoKCcub2gtbXktenNoJykgJiYgIWZzLmV4aXN0c1N5bmMocG9sUGx1Z2luVmVyc2lvbikpIHtcbiAgICBjbGkoYG1rZGlyYCwgYC1wYCwgYCR7cG9sUGx1Z2luRm9sZGVyfWApO1xuICAgIGNsaShgdG91Y2hgLCBwb2xQbHVnaW5WZXJzaW9uKTtcbiAgICBjbGkoYGNwYCwgYCR7X19kaXJuYW1lfS8uLi96c2gtcGx1Z2luL3BvbC5wbHVnaW4uenNoYCwgYCR7cG9sUGx1Z2luRm9sZGVyfS9wb2wucGx1Z2luLnpzaGApO1xuICAgIGNsaShgY3BgLCBgJHtfX2Rpcm5hbWV9Ly4uL3pzaC1wbHVnaW4vcGx1Z2luLmpzYCwgYCR7cG9sUGx1Z2luRm9sZGVyfS9wbHVnaW4uanNgKTtcbiAgICBsb2cubG9nKGBbJHt0ZXJtLmZjLmdyZWVufSAgSU5GTyAgJHt0ZXJtLm1jLnJlc2V0QWxsfV0gLm9oLW15LXpzaCBjdXN0b20gcGx1Z2luIGluc3RhbGxlZC4gUGxlYXNlIGFkZCAncG9sJyB0byBlbmFibGVkIHBsdWdpbiBsaXN0IGluICd+Ly56c2hyYycgZmlsZS5gKTtcbn1cblxuLy8gVE9ETyBzZXJ2aWNlIHN0YXRlXG5wcm9jZXNzLmVudi5UWiA9IHByb2Nlc3MuZW52LlRaID8gcHJvY2Vzcy5lbnYuVFogOiBmcy5yZWFkRmlsZVN5bmMoJy9ldGMvdGltZXpvbmUnKS50b1N0cmluZygpLnNwbGl0KCdcXG4nKVswXTtcblxuXG4vLyBnZW5lcmF0ZSBzdGFuZGFyZCBjbGkgYW5kIHRvTG9nIG9iamVjdHNcbmNvbnN0IGNsaUdlbmVyYXRvciA9IChjb250cm9sbGVyOiBQT0xfU0VUVVBfU1RBUlQgfCBQT0xfU0VUVVBfU1RPUCwgYmluZE9iamVjdDogYW55LCB0eXBlOiBhbnkpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29udHJvbGxlci5jbGksICdub0VycicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IGdsb2JhbFRoaXMuc2VydmljZS5fX3Byb3BfXy5ub0VyciA9IHRydWU7IHJldHVybiBjb250cm9sbGVyLmNsaTsgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb250cm9sbGVyLmNsaSwgJ3NwbGl0QnlMaW5lJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fLnNwbGl0QnlMaW5lID0gdHJ1ZTsgcmV0dXJuIGNvbnRyb2xsZXIuY2xpOyB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnRyb2xsZXIuY2xpLCAnc3BsaXRBbGwnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyBnbG9iYWxUaGlzLnNlcnZpY2UuX19wcm9wX18uc3BsaXRBbGwgPSB0cnVlOyByZXR1cm4gY29udHJvbGxlci5jbGk7IH1cbiAgICB9KTtcbiAgICBjb250cm9sbGVyLmNsaS5naWQgPSAoZ2lkID0gJycpID0+IHsgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fLmdpZCA9IGdpZDsgcmV0dXJuIGNvbnRyb2xsZXIuY2xpOyB9O1xuICAgIGNvbnRyb2xsZXIuY2xpLnVpZCA9ICh1aWQgPSAnJykgPT4geyBnbG9iYWxUaGlzLnNlcnZpY2UuX19wcm9wX18udWlkID0gdWlkOyByZXR1cm4gY29udHJvbGxlci5jbGk7IH07XG4gICAgY29udHJvbGxlci5jbGkud2QgPSAod2QgPSAnJykgPT4geyBnbG9iYWxUaGlzLnNlcnZpY2UuX19wcm9wX18uY3dkID0gd2Q7IHJldHVybiBjb250cm9sbGVyLmNsaTsgfTtcbiAgICBjb250cm9sbGVyLmNsaS5lb2wgPSAoZW9sID0gJycpID0+IHsgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fLmVvbCA9IGVvbDsgcmV0dXJuIGNvbnRyb2xsZXIuY2xpOyB9O1xuICAgIGNvbnRyb2xsZXIuY2xpLmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpRG8oWy4uLmFyZ3VtZW50c10sICh0aGlzIGFzIFBPTF9TRVRVUCkuc2VydmljZU5hbWUhKVxuICAgIH1cbiAgICBjb250cm9sbGVyLnRvTG9nID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIG1zZ1RvTG9nKHN0cik7XG4gICAgfVxuICAgIC8vIGJpbmQgc2VydmljZSBuYW1lXG4gICAgY29udHJvbGxlci50b0xvZyA9IGNvbnRyb2xsZXIudG9Mb2cuYmluZCh7IC4uLmJpbmRPYmplY3QsIHR5cGUsIGNvbnRyb2xsZXIgfSk7XG4gICAgY29udHJvbGxlci5jbGkuZG8gPSBjb250cm9sbGVyLmNsaS5kby5iaW5kKHsgLi4uYmluZE9iamVjdCwgdHlwZSwgY29udHJvbGxlciB9KTtcbn1cblxuLy8gZ2VuZXJhdGUgc3RhbmRhcmQgZXhlYyBhbmQgdG9Mb2cgb2JqZWN0c1xuY29uc3QgZXhlY0dlbmVyYXRvciA9IChjb250cm9sbGVyOiBQT0xfU0VUVVBfU1RBUlQsIGJpbmRPYmplY3Q6IGFueSwgdHlwZTogYW55KSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnRyb2xsZXIuZXhlYywgJ2l0Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fLml0ID0gdHJ1ZTsgcmV0dXJuIGNvbnRyb2xsZXIuZXhlYzsgfVxuICAgIH0pO1xuXG4gICAgY29udHJvbGxlci5leGVjLmdpZCA9IChnaWQgPSAnJykgPT4geyBnbG9iYWxUaGlzLnNlcnZpY2UuX19wcm9wX18uZ2lkID0gZ2lkOyByZXR1cm4gY29udHJvbGxlci5leGVjOyB9O1xuICAgIGNvbnRyb2xsZXIuZXhlYy51aWQgPSAodWlkID0gJycpID0+IHsgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fLnVpZCA9IHVpZDsgcmV0dXJuIGNvbnRyb2xsZXIuZXhlYzsgfTtcbiAgICBjb250cm9sbGVyLmV4ZWMud2QgPSAod2QgPSAnJykgPT4geyBnbG9iYWxUaGlzLnNlcnZpY2UuX19wcm9wX18uY3dkID0gd2Q7IHJldHVybiBjb250cm9sbGVyLmV4ZWM7IH07XG4gICAgY29udHJvbGxlci5leGVjLmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZXhlY0RvKFsuLi5hcmd1bWVudHNdLCAodGhpcyBhcyBQT0xfU0VUVVApLnNlcnZpY2VOYW1lISlcbiAgICB9XG4gICAgLy8gYmluZCBzZXJ2aWNlIG5hbWVcbiAgICBjb250cm9sbGVyLmV4ZWMuZG8gPSBjb250cm9sbGVyLmV4ZWMuZG8uYmluZCh7IC4uLmJpbmRPYmplY3QsIHR5cGUsIGNvbnRyb2xsZXIgfSk7XG59XG5cbmNvbnN0IGV4ZWNEbyA9IChjbWQ6IHN0cmluZ1tdLCBzZXJ2aWNlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcHJvZyA9IGNtZC5zaGlmdCgpO1xuICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5jbWRdO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHBvbC5nZXROYW5vU2VjVGltZSgpO1xuICAgIGNvbnN0IGZ1bmNOYW1lID0gbmV3IEVycm9yKCkuc3RhY2s/LnNwbGl0KFwiYXQgXCIpWzNdLnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKVsxXTtcbiAgICBsZXQgb3B0aW9ucyA9IHsgLi4uZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fIH07XG4gICAgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fID0ge307XG4gICAgY29uc3QgZW52ID0ge1xuICAgICAgICAuLi5wcm9jZXNzLmVudixcbiAgICAgICAgUE9MX0NMX0VOVjogYF9fUE9MX0NMX18ke3Byb2d9X18ke3RpbWVzdGFtcH1fX0VYRUNfX1BPTF9DTF9fYFxuICAgIH1cblxuICAgIC8vICBtdWx0aXBsZSBleGVjIG5vdCBhbGxvd2VkXG4gICAgaWYgKHBvbC5pc1N0YXRlQWZ0ZXJEb3duKHNlcnZpY2VOYW1lKSB8fCBwb2wuZ2V0KHNlcnZpY2VOYW1lKS5leGVjW2Z1bmNOYW1lISBhcyAnb25TdGFydCcgfCAnb25Mb2dpbiddKVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICBpZiAob3B0aW9ucy5naWQpIHtcbiAgICAgICAgY29uc3QgZ2lkID0gY2xpU3BsaXRCeUxpbmVTeW5jKCdpZCcsICctZycsIGAke29wdGlvbnMuZ2lkfWApO1xuICAgICAgICBvcHRpb25zLmdpZCA9ICFnaWQuYyA/IE51bWJlcihnaWQub1swXSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudWlkKSB7XG4gICAgICAgIGNvbnN0IHVpZCA9IGNsaVNwbGl0QnlMaW5lU3luYygnaWQnLCAnLXUnLCBgJHtvcHRpb25zLnVpZH1gKTtcbiAgICAgICAgb3B0aW9ucy51aWQgPSAhdWlkLmMgPyBOdW1iZXIodWlkLm9bMF0pIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IHNwYXduQ21kID0gc3Bhd24ocHJvZyEsIHBhcmFtcywgeyBjd2Q6IG9wdGlvbnMuY3dkLCBlbnYsIHN0ZGlvOiBvcHRpb25zLml0ID8gJ2luaGVyaXQnIDogdW5kZWZpbmVkLCBnaWQ6IG9wdGlvbnMuZ2lkLCB1aWQ6IG9wdGlvbnMudWlkIH0pO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXMgPT4ge1xuICAgICAgICBpZiAoIW9wdGlvbnMuaXQpIHtcbiAgICAgICAgICAgIHNwYXduQ21kLnN0ZG91dD8ub24oJ2RhdGEnLCBkYXRhID0+IHtcbiAgICAgICAgICAgICAgICBtc2dUb0xvZyhkYXRhLnRvU3RyaW5nKCksICdvdXRleGUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3Bhd25DbWQuc3RkZXJyPy5vbignZGF0YScsIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIG1zZ1RvTG9nKGRhdGEudG9TdHJpbmcoKSwgJ2VycmV4ZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3Bhd25DbWQub24oJ2Nsb3NlJywgKGMpID0+IHtcbiAgICAgICAgICAgIHJlcyhjKTtcbiAgICAgICAgICAgIHBvbC5kZWxFeGVjKHNlcnZpY2VOYW1lLCBmdW5jTmFtZSEpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBwb2wuYWRkRXhlYyhzZXJ2aWNlTmFtZSwgZnVuY05hbWUhLCB0aW1lc3RhbXAsIHsgcHJvZywgcGFyYW1zLCBwcm9taXNlLCBvcHRpb25zLCB0aW1lc3RhbXAgfSlcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuY29uc3QgY2xpRG8gPSAoY21kOiBzdHJpbmdbXSwgc2VydmljZU5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXVtdID0gW107XG4gICAgY29uc3QgcHJvZyA9IGNtZC5zaGlmdCgpO1xuICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5jbWRdO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHBvbC5nZXROYW5vU2VjVGltZSgpO1xuICAgIGNvbnN0IGZ1bmNOYW1lID0gbmV3IEVycm9yKCkuc3RhY2s/LnNwbGl0KFwiYXQgXCIpWzNdLnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKVsxXTtcbiAgICBsZXQgb3B0aW9ucyA9IHsgLi4uZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fIH07XG4gICAgZ2xvYmFsVGhpcy5zZXJ2aWNlLl9fcHJvcF9fID0ge307XG4gICAgY29uc3QgZW52ID0ge1xuICAgICAgICAuLi5wcm9jZXNzLmVudixcbiAgICAgICAgUE9MX0NMX0VOVjogYF9fUE9MX0NMX18ke3Byb2d9X18ke3RpbWVzdGFtcH1fX0NMSV9fUE9MX0NMX19gXG4gICAgfVxuICAgIGlmIChwb2wuaXNTdGF0ZUFmdGVyRG93bihzZXJ2aWNlTmFtZSkgJiYgZnVuY05hbWUgIT0gXCJvblN0b3BcIilcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgaWYgKG9wdGlvbnMuZ2lkKSB7XG4gICAgICAgIGNvbnN0IGdpZCA9IGNsaVNwbGl0QnlMaW5lU3luYygnaWQnLCAnLWcnLCBgJHtvcHRpb25zLmdpZH1gKTtcbiAgICAgICAgb3B0aW9ucy5naWQgPSAhZ2lkLmMgPyBOdW1iZXIoZ2lkLm9bMF0pIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnVpZCkge1xuICAgICAgICBjb25zdCB1aWQgPSBjbGlTcGxpdEJ5TGluZVN5bmMoJ2lkJywgJy11JywgYCR7b3B0aW9ucy51aWR9YCk7XG4gICAgICAgIG9wdGlvbnMudWlkID0gIXVpZC5jID8gTnVtYmVyKHVpZC5vWzBdKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBzcGF3bkNtZCA9IHNwYXduKHByb2chLCBwYXJhbXMsIHsgY3dkOiBvcHRpb25zLmN3ZCwgZW52LCBnaWQ6IG9wdGlvbnMuZ2lkLCB1aWQ6IG9wdGlvbnMudWlkIH0pO1xuICAgIC8vIGNsaVJ1bnNbc2V0dXAudHlwZV1bdGltZXN0YW1wXSA9IHsgcHJvZywgcGFyYW1zIH07XG4gICAgcG9sLmFkZENsaShzZXJ2aWNlTmFtZSwgZnVuY05hbWUhLCB0aW1lc3RhbXAsIHsgcHJvZywgcGFyYW1zIH0pO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXMgPT4ge1xuICAgICAgICBsZXQgX291dCA9ICcnO1xuICAgICAgICBzcGF3bkNtZC5zdGRvdXQub24oJ2RhdGEnLCBkYXRhID0+IHtcbiAgICAgICAgICAgIF9vdXQgKz0gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNwYXduQ21kLnN0ZGVyci5vbignZGF0YScsIGRhdGEgPT4ge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLm5vRXJyKSBfb3V0ICs9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNwYXduQ21kLm9uKCdjbG9zZScsIChjKSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zcGxpdEFsbCB8fCBvcHRpb25zLnNwbGl0QnlMaW5lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX2xpbmVzID0gX291dC5zcGxpdChvcHRpb25zLmVvbCA/IG9wdGlvbnMuZW9sIDogJ1xcbicpLmZpbHRlcihsID0+IGwpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNwbGl0QnlMaW5lKSByZXMoeyBvOiBfbGluZXMsIGMgfSk7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9saW5lcy5mb3JFYWNoKGwgPT4gbGluZXMucHVzaChsLnNwbGl0KC9bIFxcdF0vKSkpO1xuICAgICAgICAgICAgICAgICAgICByZXMoeyBvOiBsaW5lcywgYyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzKHsgbzogX291dCwgYyB9KTtcbiAgICAgICAgICAgIHBvbC5kZWxDbGkoc2VydmljZU5hbWUsIGZ1bmNOYW1lISwgdGltZXN0YW1wKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tR2xvYmFsIHtcbiAgICBzZXJ2aWNlOiBhbnk7XG59XG5cbmRlY2xhcmUgY29uc3QgZ2xvYmFsVGhpczoge1xuICAgIHNlcnZpY2U6IGFueTtcbn07XG5cblxuZ2xvYmFsVGhpcy5zZXJ2aWNlID0ge1xuICAgIHNldCBzZXR1cChzZXR1cDogUE9MX1NFVFVQKSB7XG4gICAgICAgIGNvbnN0IF9zZXR1cDogUE9MX1NFVFVQID0ge1xuICAgICAgICAgICAgLi4uc2V0dXAsXG4gICAgICAgICAgICBzZXJ2aWNlTmFtZTogKG5ldyBFcnJvcigpLnN0YWNrPy5zcGxpdChcImF0IFwiKVsyXSk/LnRyaW0oKS5zcGxpdCgnLmpzOicpWzBdLnJlcGxhY2UoLy4qXFwvLywgJycpLFxuICAgICAgICAgICAgc3NPblN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgY2xpOiB7fSxcbiAgICAgICAgICAgICAgICBleGVjOiB7fVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNzT25TdG9wOiB7XG4gICAgICAgICAgICAgICAgY2xpOiB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzc09uTG9naW46IHtcbiAgICAgICAgICAgICAgICBjbGk6IHt9LFxuICAgICAgICAgICAgICAgIGV4ZWM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0ZW5kIF9zZXR1cFxuICAgICAgICBjbGlHZW5lcmF0b3IoX3NldHVwLnNzT25TdGFydCwgX3NldHVwLCBcInN0YXJ0XCIpO1xuICAgICAgICBjbGlHZW5lcmF0b3IoX3NldHVwLnNzT25TdG9wLCBfc2V0dXAsIFwic3RvcFwiKTtcbiAgICAgICAgY2xpR2VuZXJhdG9yKF9zZXR1cC5zc09uTG9naW4sIF9zZXR1cCwgXCJsb2dpblwiKTtcbiAgICAgICAgZXhlY0dlbmVyYXRvcihfc2V0dXAuc3NPblN0YXJ0LCBfc2V0dXAsIFwic3RhcnRcIik7XG4gICAgICAgIGV4ZWNHZW5lcmF0b3IoX3NldHVwLnNzT25Mb2dpbiwgX3NldHVwLCBcImxvZ2luXCIpO1xuICAgICAgICBwb2wuc3RhdGVJbml0KF9zZXR1cC5zZXJ2aWNlTmFtZSEpO1xuICAgICAgICBwb2wuc2V0U2V0dXAoX3NldHVwLnNlcnZpY2VOYW1lISwgX3NldHVwKTtcbiAgICB9LFxuICAgIF9fcHJvcF9fOiB7fSxcbn1cblxuZXhwb3J0IGNvbnN0IGNsaVNwbGl0QnlMaW5lU3luYyA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xuICAgIGNvbnN0IF9jbWQgPSBbLi4uYXJndW1lbnRzXTtcblxuICAgIGNvbnN0IHNwYXduQ21kID0gc3Bhd25TeW5jKF9jbWQuc2hpZnQoKSwgWy4uLl9jbWRdKTtcbiAgICBjb25zdCBfbGluZXMgPSBzcGF3bkNtZC5zdGRvdXQudG9TdHJpbmcoKS5zcGxpdCgnXFxuJykuZmlsdGVyKGwgPT4gbCk7XG5cbiAgICByZXR1cm4geyBvOiBfbGluZXMsIGM6IHNwYXduQ21kLnN0YXR1cyB9XG59O1xuXG5leHBvcnQgY29uc3QgY2xpU3BsaXRCeUxpbmUgPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICBjb25zdCBfY21kID0gWy4uLmFyZ3VtZW50c107XG5cbiAgICBjb25zdCBzcGF3bkNtZCA9IHNwYXduKF9jbWQuc2hpZnQoKSwgWy4uLl9jbWRdKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8eyBvOiBzdHJpbmdbXSwgYzogbnVtYmVyIH0+KHJlcyA9PiB7XG4gICAgICAgIGxldCBfb3V0ID0gJyc7XG4gICAgICAgIHNwYXduQ21kLnN0ZG91dC5vbignZGF0YScsIGRhdGEgPT4ge1xuICAgICAgICAgICAgX291dCArPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgc3Bhd25DbWQuc3RkZXJyLm9uKCdkYXRhJywgZGF0YSA9PiB7XG4gICAgICAgICAgICBfb3V0ICs9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgICBzcGF3bkNtZC5vbignY2xvc2UnLCAoYzogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfbGluZXMgPSBfb3V0LnNwbGl0KCdcXG4nKS5maWx0ZXIobCA9PiBsKTtcbiAgICAgICAgICAgIHJlcyh7IG86IF9saW5lcywgYyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9nRmlsZTogUE9MX0xPR0dFUiA9IHtcbiAgICB3cml0ZTogbXNnVG9Mb2csXG4gICAgbG9nOiAoKSA9PiB7IH0sXG4gICAgd2FybjogKCkgPT4geyB9LFxuICAgIGVycjogKCkgPT4geyB9LFxuICAgIGVuZDogKCkgPT4geyB9XG59O1xuXG5jb25zb2xlLmxvZyA9IGNvbnNvbGVbXCJsb2dcIl0uYmluZChnbG9iYWwuY29uc29sZSwgVEFTS19JTkRFTlQpO1xuY29uc29sZS53YXJuID0gY29uc29sZVtcIndhcm5cIl0uYmluZChnbG9iYWwuY29uc29sZSwgVEFTS19JTkRFTlQpO1xuY29uc29sZS5lcnJvciA9IGNvbnNvbGVbXCJlcnJvclwiXS5iaW5kKGdsb2JhbC5jb25zb2xlLCBUQVNLX0lOREVOVCk7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgRGF0ZSB7XG4gICAgICAgIElTT1N0cmluZ3M6ICgpID0+IHN0cmluZ1xuICAgIH1cbn1cblxuLy8gRGF0ZSBvdmVycmlkZXNcbkRhdGUucHJvdG90eXBlLklTT1N0cmluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdHpvID0gLXRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICBjb25zdCBkaWYgPSB0em8gPj0gMCA/ICcrJyA6ICctJztcbiAgICBjb25zdCBwYWQgPSBmdW5jdGlvbiAobnVtOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIChudW0gPCAxMCA/ICcwJyA6ICcnKSArIG51bTtcbiAgICB9O1xuICAgIGNvbnN0IHpvbmUgPSBkaWYgKyBwYWQoTWF0aC5mbG9vcihNYXRoLmFicyh0em8pIC8gNjApKSArICc6JyArIHBhZChNYXRoLmFicyh0em8pICUgNjApXG4gICAgdGhpcy5zZXRUaW1lKHRoaXMuZ2V0VGltZSgpICsgKHR6byAqIDYwICogMTAwMCkpO1xuICAgIHJldHVybiB0aGlzLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgnWicsIHpvbmUpO1xufSIsImltcG9ydCBmcyBmcm9tICdmcyc7XG5cbmV4cG9ydCBjb25zdCBMT0dfRklMRV9ST09UID0gJy92YXIvbG9nL3BvbCc7XG5leHBvcnQgY29uc3QgTE9HX0ZJTEVfUEFUSCA9IGAke0xPR19GSUxFX1JPT1R9L3BvbC5sb2dgO1xuXG5jb25zdCBsb2dfZmlsZSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKExPR19GSUxFX1BBVEgsIHsgZmxhZ3M6ICdhJyB9KTtcblxuZXhwb3J0IGNvbnN0IG1zZ1RvTG9nID0gKG1lc3NhZ2U6IHN0cmluZywgbGV2ZWwgPSAnb3V0bG9nJywgc2VydmljZT86IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGxvZyA9IHtcbiAgICAgICAgdGltZTogbmV3IERhdGUoKS5JU09TdHJpbmdzKCksXG4gICAgICAgIGxldmVsLFxuICAgICAgICBzZXJ2aWNlLFxuICAgICAgICBtZXNzYWdlXG4gICAgfVxuICAgIGxvZ19maWxlLndyaXRlKGAke0pTT04uc3RyaW5naWZ5KGxvZyl9XFxuYCk7XG59IiwiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBtaW5pbWlzdCBmcm9tICdtaW5pbWlzdCc7XG5pbXBvcnQgbmV0IGZyb20gJ25ldCc7XG5pbXBvcnQgb3MgZnJvbSBcIm9zXCI7XG5pbXBvcnQgeyBoZWxwIH0gZnJvbSAnLi4vZW50cnkvcG9sJztcbmltcG9ydCB7IHBvbCwgUE9MX0NMQl9NRVRIT0QsIFBPTF9MT0dHRVIsIFNFUlZJQ0VfREVGIH0gZnJvbSAnLi9kYWVtb24nO1xuaW1wb3J0IHsgY2xpU3BsaXRCeUxpbmUsIGxvZywgbG9nRmlsZSwgVEFTS19JTkRFTlQgfSBmcm9tICcuL2dsb2JhbCc7XG5pbXBvcnQgeyBjbGllbnRDcmVhdGUsIHNlcnZlckNsZWFudXAsIHNlcnZlckNyZWF0ZSB9IGZyb20gJy4vc29ja2V0JztcbmltcG9ydCB7IHRlcm0gfSBmcm9tICcuL3Rlcm0nO1xuXG5jb25zdCBQT0xfREFFTU9OX1JVTk5JTkdfTVNHID0gYEFub3RoZXIgcG9sIGRhZW1vbiBpcyBydW5uaW5nIWA7XG5jb25zdCBQT1NTSUJMRV9PUFRJT05TX01TRyA9IGBwb3NzaWJsZSBvcHRpb25zOiBbLS1hbGx8c2VydmljZV9uYW1lLnNlcnZpY2VdYDtcbmNvbnN0IFBPTF9DT05GSUdfRk9MREVSID0gcHJvY2Vzcy5lbnYuUE9MX0NPTkZJR19GT0xERVIgPyBbcHJvY2Vzcy5lbnYuUE9MX0NPTkZJR19GT0xERVJdIDogW1wiL2V0Yy9wb2xcIl07XG5QT0xfQ09ORklHX0ZPTERFUi5wdXNoKGAke29zLmhvbWVkaXIoKX0vLmNvbmZpZy9wb2xgKTtcbmNvbnN0IGVudnMgPSB7IC4uLnByb2Nlc3MuZW52IH07XG5cblxuZXhwb3J0IGNvbnN0IHBvbERhZW1vbiA9IGFzeW5jIChhcmd2OiBtaW5pbWlzdC5QYXJzZWRBcmdzKSA9PiB7XG5cbiAgICBjb25zdCBsb29rdXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IF9ycyA9IGF3YWl0IGNsaVNwbGl0QnlMaW5lKCdmaW5kJywgLi4uUE9MX0NPTkZJR19GT0xERVIsICctbmFtZScsICcqLnNlcnZpY2UuanMnKTtcbiAgICAgICAgY29uc3QgX2xvZ2luU2VydmljZSA9IGF3YWl0IGNsaVNwbGl0QnlMaW5lKCdyZWFkbGluaycsIGAtZWAsIC4uLlBPTF9DT05GSUdfRk9MREVSLm1hcChmID0+IGAke2Z9L2xvZ2luLnNlcnZpY2UudGFyZ2V0LmpzYCkpO1xuICAgICAgICBjb25zdCBfcG9sRGFlbW9uUnVubmluZ0NoZWNrID0gYXdhaXQgY2xpU3BsaXRCeUxpbmUoJ3NoJywgYC1jYCwgYHBzIGF1eCB8IGdyZXAgXCIuKm5vZGUuKnBvbC4qYm9vdCRcImApO1xuICAgICAgICBwb2wucnVubmluZyA9IF9wb2xEYWVtb25SdW5uaW5nQ2hlY2suby5sZW5ndGggPCAyID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgICAgIF9ycy5vLmZpbHRlcihyID0+ICFyLmluY2x1ZGVzKCdObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5JykpLm1hcChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByPy5zcGxpdCgnLycpPy5wb3AoKT8ucmVwbGFjZSgnLmpzJywgJycpO1xuICAgICAgICAgICAgcG9sLmluaXQobmFtZSEsIHIpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IF9wcm9jID0gYXdhaXQgY2xpU3BsaXRCeUxpbmUoJ2ZpbmQnLCAnL3Byb2MnLCAnLW1heGRlcHRoJywgJzInLCAnLW5hbWUnLCAnZW52aXJvbicpO1xuICAgICAgICBjb25zdCBfcnVubmluZ19lbnZzID0gX3Byb2Muby5maWx0ZXIoZSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZzLmFjY2Vzc1N5bmMoZSwgZnMuY29uc3RhbnRzLlJfT0spO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGVudkZpbGUgb2YgX3J1bm5pbmdfZW52cykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBmcy5yZWFkRmlsZVN5bmMoZW52RmlsZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBidWZmZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUNvbnRlbnQuaW5jbHVkZXMoXCJfX1BPTF9fXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YlByb2NJbmZvID0gZmlsZUNvbnRlbnQuc3BsaXQoJ19fUE9MX0NMX18nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY0luZm8gPSBzdWJQcm9jSW5mb1sxXS5zcGxpdChcIl9fXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfc3J2SW5mbyA9IGZpbGVDb250ZW50LnNwbGl0KCdfX1BPTF9fJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNydkluZm8gPSBfc3J2SW5mb1sxXS5zcGxpdChcIl9fXCIpO1xuICAgICAgICAgICAgICAgICAgICBwb2wuc2V0UnVubmluZyhzcnZJbmZvWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgcG9sLmFkZFByb2Nlc3Moc3J2SW5mb1swXSwgZW52RmlsZS5zcGxpdCgnLycpWzJdLCBwcm9jSW5mb1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyByZXF1aXJlIGFsbCBzZXJ2aWNlIGZpbGVcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBkeW5hbWljUmVxdWlyZSA9ICh0eXBlb2YgX193ZWJwYWNrX3JlcXVpcmVfXyA9PT0gJ2Z1bmN0aW9uJykgPyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyA6IHJlcXVpcmVcbiAgICAgICAgZm9yIChjb25zdCBzZXJ2aWNlIG9mIHBvbC5nZXRTZXJ2aWNlcygpKSB7XG4gICAgICAgICAgICBkeW5hbWljUmVxdWlyZShzZXJ2aWNlLnBhdGghKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9sb2dpblNlcnZpY2Uuby5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgcG9sLnNldExvZ2luU2VydmljZShzPy5zcGxpdCgnLycpPy5wb3AoKT8ucmVwbGFjZSgnLmpzJywgJycpISk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgYXdhaXQgbG9va3VwKCk7XG5cbiAgICAvLyBzdGFydCBwcm9jZXNzIGltcGxlbWVudGF0aW9uXG4gICAgY29uc3Qgc3RhcnQgPSBhc3luYyAoc2VydmljZU5hbWU6IHN0cmluZyB8IG51bGwsIGxvZ2dlcjogUE9MX0xPR0dFUiB8IG5ldC5Tb2NrZXQpID0+IHtcbiAgICAgICAgaWYgKCFzZXJ2aWNlTmFtZSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXBvbC5nZXRTZXJ2aWNlcygpLnNvbWUocyA9PiBzLm5hbWUgPT09IHNlcnZpY2VOYW1lIHx8IHNlcnZpY2VOYW1lID09PSBcIi0tYWxsXCIpKSB7XG4gICAgICAgICAgICBsb2dnZXIud3JpdGUoUE9TU0lCTEVfT1BUSU9OU19NU0cpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvbWlzZUFsbFNlcnZpY2U6IEFycmF5PFByb21pc2U8YW55Pj4gPSBbXTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VydmljZSBvZiBwb2wuZ2V0U2VydmljZXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlTmFtZSAhPT0gXCItLWFsbFwiICYmIHNlcnZpY2UubmFtZSAhPT0gc2VydmljZU5hbWUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbGV0IHNlcnZpY2VTdGFydFJlc29sdmVyOiBQT0xfQ0xCX01FVEhPRCA9ICgpID0+IHsgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBzcnYgPSBwb2wuZ2V0KHNlcnZpY2UubmFtZSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZUFsbFNlcnZpY2UucHVzaChuZXcgUHJvbWlzZShyID0+IHNlcnZpY2VTdGFydFJlc29sdmVyID0gcikpO1xuICAgICAgICAgICAgICAgIHBvbC5zdGF0ZUluaXQoc2VydmljZS5uYW1lKTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2wuZ2V0QWxsUnVubmluZygpLnNvbWUocyA9PiBzLm5hbWUgPT09IHNlcnZpY2UubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53cml0ZShgWyR7dGVybS5mYy55ZWxsb3d9IFdBUk4gJHt0ZXJtLm1jLnJlc2V0QWxsfV0gJHtzZXJ2aWNlLm5hbWV9IGlzIGFscmVhZHkgcnVubmluZyAuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VTdGFydFJlc29sdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LnNldHVwPy5vblN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBPTDogYF9fUE9MX18ke3NlcnZpY2UubmFtZX1fXyR7cG9sLmdldE5hbm9TZWNUaW1lKCl9X19QT0xfX2BcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud3JpdGUoYFske3Rlcm0uZmMuZ3JlZW59ICBPSyAgJHt0ZXJtLm1jLnJlc2V0QWxsfV0gc3RhcnQgJHtzZXJ2aWNlLm5hbWV9IC4uLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3J2LnNldHVwLm9uU3RhcnQoc3J2LnNldHVwLnNzT25TdGFydCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBoYW5kbGUgcmVzdGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gaGFuZGxlIGlmIGhhcyBwcmUgc3RhcnRlZCBjbGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2wuc3RhcnRSdW5DaGVja2VyKHNlcnZpY2UubmFtZSwgJ2FmdGVyJywgJ29uU3RhcnQnLCAnc3RhcnRlZCcsIGxvZ0ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2wuc3RhcnRSdW5DaGVja2VyKHNlcnZpY2UubmFtZSwgJ2JlZm9yZScsICdvblN0YXJ0JywgJ3N0YXJ0ZWQnLCBsb2dnZXIsIHNlcnZpY2VTdGFydFJlc29sdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VTdGFydFJlc29sdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud3JpdGUoYFske3Rlcm0uZmMucmVkfUZBSUxFRCR7dGVybS5tYy5yZXNldEFsbH1dIHN0YXJ0ICR7c2VydmljZS5uYW1lfSAuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndyaXRlKGAgICAgICAgICR7KGVycm9yIGFzIEVycm9yKS5zdGFja31gKTtcbiAgICAgICAgICAgICAgICAgICAgcG9sLmdldChzZXJ2aWNlLm5hbWUpPy5zdGFydFJlc29sdmVyPy4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlQWxsU2VydmljZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzdG9wIHByb2Nlc3MgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBzdG9wID0gYXN5bmMgKHNlcnZpY2VOYW1lOiBzdHJpbmcgfCBudWxsLCBsb2dnZXI6IFBPTF9MT0dHRVIgfCBuZXQuU29ja2V0LCBmb3JjZT86IGJvb2xlYW4pID0+IHtcbiAgICAgICAgaWYgKCFwb2wuZ2V0U2VydmljZXMoKS5zb21lKHMgPT4gcy5uYW1lID09PSBzZXJ2aWNlTmFtZSB8fCBzZXJ2aWNlTmFtZSA9PT0gJy0tYWxsJykpIHtcbiAgICAgICAgICAgIGxvZ2dlci53cml0ZShQT1NTSUJMRV9PUFRJT05TX01TRyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb2wuZ2V0QWxsUnVubmluZygpLnNvbWUocyA9PiBzLm5hbWUgPT09IHNlcnZpY2VOYW1lKSAmJiBzZXJ2aWNlTmFtZSAhPT0gJy0tYWxsJykge1xuICAgICAgICAgICAgbG9nZ2VyLndyaXRlKGBbJHt0ZXJtLmZjLnllbGxvd30gV0FSTiAke3Rlcm0ubWMucmVzZXRBbGx9XSAke3NlcnZpY2VOYW1lfSBpcyBhbHJlYWR5IHN0b3BwZWQgLi4uYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlcnZpY2VOYW1lID09PSAnLS1hbGwnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNydiBvZiBwb2wuZ2V0U2VydmljZXMoKSkge1xuICAgICAgICAgICAgICAgIHBvbC5zZXRTdGF0ZURvd24oc3J2Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9sLnNldFN0YXRlRG93bihzZXJ2aWNlTmFtZSEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvbWlzZUFsbFNlcnZpY2U6IFByb21pc2U8YW55PltdID0gW107XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZTogUE9MX0NMQl9NRVRIT0QpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3J2IG9mIHBvbC5nZXRBbGxSdW5uaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VydmljZU5hbWUgPT09ICctLWFsbCcgfHwgc2VydmljZU5hbWUgPT09IHNydi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZXJ2aWNlU3RvcFJlc29sdmVyOiBQT0xfQ0xCX01FVEhPRCA9ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZVN0b3BSZXNvbHZlcjogUE9MX0NMQl9NRVRIT0QgPSAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0U3RvcFJlc29sdmVyOiBQT0xfQ0xCX01FVEhPRCA9ICgpID0+IHsgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZUFsbFByZVBvc3RTdG9wRG9uZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHIgPT4gcHJlU3RvcFJlc29sdmVyID0gciksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShyID0+IHBvc3RTdG9wUmVzb2x2ZXIgPSByKV07XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3N0b3AgPSBhc3luYyAoc2VydmljZTogU0VSVklDRV9ERUYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5PYmplY3QudmFsdWVzKHNlcnZpY2UuY2xpLmJlZm9yZV9vblN0YXJ0KS5tYXAocz0+cy5wcm9taXNlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5PYmplY3QudmFsdWVzKHNlcnZpY2UuY2xpLmFmdGVyX29uU3RhcnQpLm1hcChzPT5zLnByb21pc2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLk9iamVjdC52YWx1ZXMoc2VydmljZS5jbGkuYmVmb3JlX29uU3RvcCkubWFwKHM9PnMucHJvbWlzZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uT2JqZWN0LnZhbHVlcyhzZXJ2aWNlLmNsaS5hZnRlcl9vblN0b3ApLm1hcChzPT5zLnByb21pc2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuZXhlYy5vblN0YXJ0Py5wcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuZXhlYy5vbkxvZ2luPy5wcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcnYgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9sLnN0b3BSdW5DaGVja2VyKHNlcnZpY2UubmFtZSwgJ1N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2Ygc2VydmljZS5wcm9jZXNzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZE1zZyA9IFRBU0tfSU5ERU5UO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYgIT09IHNlcnZpY2UubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcnYgPSBzZXJ2aWNlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRNc2cgPSBgWyR7dGVybS5mYy5ncmVlbn0gU1RPUCAke3Rlcm0ubWMucmVzZXRBbGx9XWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpbGwgPSBmb3JjZSA/IFsna2lsbCcsICctOScsIHAucHJvY0lkXSA6IFsna2lsbCcsIHAucHJvY0lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGMgfSA9IGF3YWl0IGNsaVNwbGl0QnlMaW5lKC4uLmtpbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndyaXRlKGAke2hlYWRNc2d9ICR7c2VydmljZS5uYW1lfSBzZXJ2aWNlIHdpdGggcHJvYy9waWRbJHtwLnByb2NOYW1lfS8ke3AucHJvY0lkfV0gLi4uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocGVuZGluZ1Byb21pc2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VBbGxTZXJ2aWNlLnB1c2gobmV3IFByb21pc2UociA9PiAoc2VydmljZVN0b3BSZXNvbHZlciBhcyBhbnkpID0gcikpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5zZXR1cD8ub25TdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3J2LnNldHVwLnNzT25TdG9wLnN0b3BBbGwgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gaGFuZGxlIGlmIGhhcyBwcmUgc3RhcnRlZCBjbGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3N0b3Aoc3J2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sLnNldFN0YXRlU3RvcChzcnYubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbC5zdGFydFJ1bkNoZWNrZXIoc3J2Lm5hbWUsICdhZnRlcicsICdvblN0b3AnLCAnc3RvcHBlZCcsIGxvZ2dlciwgcG9zdFN0b3BSZXNvbHZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcnYuc2V0dXAub25TdG9wKHNydi5zZXR1cC5zc09uU3RvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sLnN0YXJ0UnVuQ2hlY2tlcihzcnYubmFtZSwgJ2JlZm9yZScsICdvblN0b3AnLCAnc3RvcHBlZCcsIGxvZ2dlciwgcHJlU3RvcFJlc29sdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3N0b3Aoc3J2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVTdG9wUmVzb2x2ZXIoKTsgcG9zdFN0b3BSZXNvbHZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlQWxsUHJlUG9zdFN0b3BEb25lKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlU3RvcFJlc29sdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlYWR5IHN0YXRlIGZvciB0aGUgbmV4dCBjaXJjbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sLnNldFN0YXRlUmVhZHkoc3J2Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud3JpdGUoYFske3Rlcm0uZmMucmVkfUZBSUxFRCR7dGVybS5tYy5yZXNldEFsbH1dIHN0b3AgJHtzcnYubmFtZX0gLi4uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlU3RvcFJlc29sdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VydmljZU5hbWUgPT09ICctLWFsbCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgcG9sLmdldEFsbFN0b3BwZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud3JpdGUoYFske3Rlcm0uZmMueWVsbG93fSBXQVJOICR7dGVybS5tYy5yZXNldEFsbH1dICR7cy5uYW1lfSBpcyBhbHJlYWR5IHN0b3BwZWQgLi4uYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZUFsbFNlcnZpY2UpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFyZ3YuX1swXSkge1xuICAgICAgICBjYXNlIFwiYm9vdFwiOlxuICAgICAgICAgICAgaWYgKHBvbC5ydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgbG9nLmxvZyhQT0xfREFFTU9OX1JVTk5JTkdfTVNHKTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZXJ2ZXJDcmVhdGUoYXN5bmMgKG1zZzogbWluaW1pc3QuUGFyc2VkQXJncywgc29ja2V0OiBuZXQuU29ja2V0KSA9PiB7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1zZy5fWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdG9wXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5fLmxlbmd0aCB8fCAobXNnLl8ubGVuZ3RoIDwgMiAmJiAhbXNnLmFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQud3JpdGUoUE9TU0lCTEVfT1BUSU9OU19NU0cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9va3VwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RvcChtc2cuX1sxXSA/IG1zZy5fWzFdIDogbXNnLmFsbCA/IFwiLS1hbGxcIiA6IG51bGwsIHNvY2tldCwgbXNnLmZvcmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5fLmxlbmd0aCB8fCAobXNnLl8ubGVuZ3RoIDwgMiAmJiAhbXNnLmFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQud3JpdGUoUE9TU0lCTEVfT1BUSU9OU19NU0cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9va3VwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RhcnQobXNnLl9bMV0gPyBtc2cuX1sxXSA6IG1zZy5hbGwgPyBcIi0tYWxsXCIgOiBudWxsLCBzb2NrZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtc2cuXy5sZW5ndGggfHwgKG1zZy5fLmxlbmd0aCA8IDIgJiYgIW1zZy5hbGwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LndyaXRlKFBPU1NJQkxFX09QVElPTlNfTVNHKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvb2t1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0b3AobXNnLl9bMV0gPyBtc2cuX1sxXSA6IG1zZy5hbGwgPyBcIi0tYWxsXCIgOiBudWxsLCBzb2NrZXQsIG1zZy5mb3JjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0YXJ0KG1zZy5fWzFdID8gbXNnLl9bMV0gOiBtc2cuYWxsID8gXCItLWFsbFwiIDogbnVsbCwgc29ja2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBzdGFydChcIi0tYWxsXCIsIGxvZyk7XG4gICAgICAgICAgICBpZiAocG9sLmdldExvZ2luU2VydmljZSgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHN0b3AgcHJvY2VzcyBpZiB0aGVyZSB3YXMgbG9naW5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9va3VwKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0b3AoXCItLWFsbFwiLCBsb2cpO1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb2wuaXNTdGF0ZUFmdGVyRG93bihwb2wuZ2V0TG9naW5TZXJ2aWNlKCk/Lm5hbWUhKSlcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW52cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFBPTDogYF9fUE9MX18ke3BvbC5nZXRMb2dpblNlcnZpY2UoKT8ubmFtZX1fXyR7cG9sLmdldE5hbm9TZWNUaW1lKCl9X19QT0xfX2BcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcG9sLmdldExvZ2luU2VydmljZSgpPy5zZXR1cD8ub25Mb2dpbj8uKHBvbC5nZXRMb2dpblNlcnZpY2UoKT8uc2V0dXA/LnNzT25Mb2dpbiEpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbC5nZXRMb2dpblNlcnZpY2UoKT8uZXhlYy5vbkxvZ2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sLmdldExvZ2luU2VydmljZSgpPy5leGVjPy5vbkxvZ2luPy5wcm9taXNlPy50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ291dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNvbXBsZXRpb25cIjpcbiAgICAgICAgICAgIGlmIChhcmd2Ll9bMV0gPT09ICd6c2gnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52LlpTSCAmJiBwcm9jZXNzLmVudi5aU0guZW5kc1dpdGgoJy5vaC1teS16c2gnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xQbHVnaW5Gb2xkZXIgPSBgJHtwcm9jZXNzLmVudi5aU0h9L2N1c3RvbS9wbHVnaW5zL3BvbGA7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaVNwbGl0QnlMaW5lKGBta2RpcmAsIGAtcGAsIGAke3BvbFBsdWdpbkZvbGRlcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xpU3BsaXRCeUxpbmUoYGNwYCwgYCR7X19kaXJuYW1lfS8uLi96c2gtcGx1Z2luL3BvbC5wbHVnaW4uenNoYCwgYCR7cG9sUGx1Z2luRm9sZGVyfS9wb2wucGx1Z2luLnpzaGApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGlTcGxpdEJ5TGluZShgY3BgLCBgJHtfX2Rpcm5hbWV9Ly4uL3pzaC1wbHVnaW4vcGx1Z2luLmpzYCwgYCR7cG9sUGx1Z2luRm9sZGVyfS9wbHVnaW4uanNgKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhgWyR7dGVybS5mYy5ncmVlbn0gIElORk8gICR7dGVybS5tYy5yZXNldEFsbH1dIC5vaC1teS16c2ggY3VzdG9tIHBsdWdpbiBpbnN0YWxsZWQuIFBsZWFzZSBhZGQgJ3BvbCcgdG8gZW5hYmxlZCBwbHVnaW4gbGlzdCBpbiAnfi8uenNocmMnIGZpbGUuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJwc1wiOlxuICAgICAgICAgICAgbGV0IHNydk5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzcnYgb2YgcG9sLmdldEFsbFJ1bm5pbmcoKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvYyBvZiBzcnYucHJvY2Vzc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBoZWFkTXNnID0gVEFTS19JTkRFTlQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcnZOYW1lICE9PSBzcnYubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3J2TmFtZSA9IHNydi5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZE1zZyA9IGBbJHt0ZXJtLmZjLmdyZWVufSBSVU4gJHt0ZXJtLm1jLnJlc2V0QWxsfV0gYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2cubG9nKGhlYWRNc2csIHNydi5uYW1lLCBgc2VydmljZSB3aXRoIHByb2MvcGlkWyR7cHJvYy5wcm9jTmFtZX0vJHtwcm9jLnByb2NJZH1dIC4uLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmd2LmFsbCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBwb2wuZ2V0QWxsU3RvcHBlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5sb2coYFske3Rlcm0uZmMueWVsbG93fSBTVE9QICR7dGVybS5tYy5yZXNldEFsbH1dYCwgcy5uYW1lLCBgc2VydmljZSAuLi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0b3BcIjpcbiAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgIGNhc2UgXCJyZXN0YXJ0XCI6XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRDcmVhdGUoKTtcbiAgICAgICAgICAgIGNsaWVudC53cml0ZShKU09OLnN0cmluZ2lmeShhcmd2KSk7XG4gICAgICAgICAgICAvLyBjbGllbnRDbGVhbnVwKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGhlbHAoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cbiIsIlxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBtaW5pbWlzdCBmcm9tICdtaW5pbWlzdCc7XG5pbXBvcnQgbmV0IGZyb20gJ25ldCc7XG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuL2dsb2JhbCc7XG5pbXBvcnQgeyBtc2dUb0xvZyB9IGZyb20gJy4vbG9nZ2VyJztcblxuY29uc3QgY29ubmVjdGlvbnM6IHtcbiAgICBbbmFtZTogc3RyaW5nXTogbmV0LlNvY2tldFxuXG59ID0ge307XG5jb25zdCB0b0xvZyA9IChtc2c6IHN0cmluZykgPT4geyBtc2dUb0xvZyhtc2csICdwb2wgICAnKSB9XG52YXIgc2VydmVyOiBuZXQuU2VydmVyLCBjbGllbnQ6IG5ldC5Tb2NrZXQ7XG5cbi8vIHByZXZlbnQgZHVwbGljYXRlIGV4aXQgbWVzc2FnZXNcbnZhciBTSFVURE9XTiA9IGZhbHNlO1xuXG4vLyBPdXIgc29ja2V0XG5jb25zdCBTT0NLRVRGSUxFID0gJy90bXAvcG9sLnNvY2snO1xuXG5mdW5jdGlvbiBfc2VydmVyQ3JlYXRlKHNvY2tldDogc3RyaW5nLCBvbk1zZyA9IGFzeW5jIChtc2c6IG1pbmltaXN0LlBhcnNlZEFyZ3MsIHN0cmVhbTogbmV0LlNvY2tldCkgPT4geyB9KSB7XG4gICAgdG9Mb2coJ1NvY2tldCBzZXJ2ZXI6IGNyZWF0aW5nJyk7XG4gICAgbGV0IHNvY2s7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnkpID0+IHtcbiAgICAgICAgc2VydmVyID0gbmV0LmNyZWF0ZVNlcnZlcihmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgICAgICB0b0xvZygnU29ja2V0IHNlcnZlcjogY29ubmVjdGlvbiBhY2tub3dsZWRnZWQnKTtcbiAgICAgICAgICAgIC8vIFN0b3JlIGFsbCBjb25uZWN0aW9ucyBzbyB3ZSBjYW4gdGVybWluYXRlIHRoZW0gaWYgdGhlIHNlcnZlciBjbG9zZXMuXG4gICAgICAgICAgICAvLyBBbiBvYmplY3QgaXMgYmV0dGVyIHRoYW4gYW4gYXJyYXkgZm9yIHRoZXNlLlxuICAgICAgICAgICAgdmFyIHNlbGYgPSAoRGF0ZS5ub3coKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25zW3NlbGZdID0gc3RyZWFtO1xuICAgICAgICAgICAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdG9Mb2coJ1NvY2tldCBzZXJ2ZXI6IGNsaWVudCBkaXNjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbnNbc2VsZl07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWVzc2FnZXMgYXJlIGJ1ZmZlcnMuIHVzZSB0b1N0cmluZ1xuICAgICAgICAgICAgc3RyZWFtLm9uKCdkYXRhJywgYXN5bmMgKG1zZzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgX21zZzogbWluaW1pc3QuUGFyc2VkQXJncyA9IEpTT04ucGFyc2UobXNnLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIG9uTXNnKF9tc2csIGNvbm5lY3Rpb25zW3NlbGZdKTtcbiAgICAgICAgICAgICAgICAvLyBzdHJlYW0ud3JpdGUoJ3F1eCcpOyAvLyBuZWVkIHRvIGJlIGNhbGwgaW4gcGxhY2UsIGNhbiBub3QgcmVmZXJlbmNlIHRvIHdyaXRlIGZ1bmN0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0cmVhbS5vbignZXJyb3InLCBhc3luYyAoZXhjOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uc1tzZWxmXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5saXN0ZW4oc29ja2V0KS5vbignY29ubmVjdGlvbicsIGZ1bmN0aW9uIChfc29ja2V0KSB7XG4gICAgICAgICAgICB0b0xvZygnU29ja2V0IHNlcnZlcjogY2xpZW50IGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgc29jayA9IF9zb2NrZXQ7XG4gICAgICAgICAgICAvLyBfc29ja2V0LndyaXRlKCdfX2Jvb3AnKTsvLyBzZW5kIHRvIGNsaWVudCBpbW1lZGlhdGVseSBhZnRlciBjb25uZWN0XG4gICAgICAgIH0pO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBzZXJ2ZXJDbGVhbnVwID0gKCkgPT4ge1xuICAgIGlmICghU0hVVERPV04gJiYgc2VydmVyKSB7XG4gICAgICAgIFNIVVRET1dOID0gdHJ1ZTtcbiAgICAgICAgdG9Mb2coXCJTb2NrZXQgc2VydmVyOiB0ZXJtaW5hdGluZ1wiKTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvbm5lY3Rpb25zKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBjbGllbnRzID0gT2JqZWN0LmtleXMoY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgd2hpbGUgKGNsaWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNsaWVudCA9IGNsaWVudHMucG9wKCkgYXMgc3RyaW5nO1xuICAgICAgICAgICAgICAgIC8vY29ubmVjdGlvbnNbY2xpZW50XS53cml0ZSgnX19kaXNjb25uZWN0Jyk7IC8vIHNlbmQgdG8gY2xpZW50IGltbWVkaWF0ZWx5IGJlZm9yZSBkaXNjb25uZWN0XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnNbY2xpZW50XS5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXJ2ZXIuY2xvc2UoKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3Qgc2VydmVyQ3JlYXRlID0gYXN5bmMgKG9uTXNnID0gYXN5bmMgKG1zZzogbWluaW1pc3QuUGFyc2VkQXJncywgc3RyZWFtOiBuZXQuU29ja2V0KSA9PiB7IH0pID0+IHtcbiAgICAvLyBjaGVjayBmb3IgZmFpbGVkIGNsZWFudXBcbiAgICB0b0xvZygnU29ja2V0IHNlcnZlcjogY2hlY2tpbmcgZm9yIGxlZnRvdmVyIHNvY2tldCcpO1xuXG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoU09DS0VURklMRSkpIHtcbiAgICAgICAgdG9Mb2coJ1NvY2tldCBzZXJ2ZXI6IHJlbW92aW5nIGxlZnRvdmVyIHNvY2tldC4nKTtcbiAgICAgICAgZnMudW5saW5rU3luYyhTT0NLRVRGSUxFKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0b0xvZygnU29ja2V0IHNlcnZlcjogbm8gbGVmdG92ZXIgc29ja2V0IGZvdW5kLicpO1xuICAgIH1cbiAgICAvLyBjbG9zZSBhbGwgY29ubmVjdGlvbnMgd2hlbiB0aGUgdXNlciBkb2VzIENUUkwtQ1xuICAgIHByb2Nlc3Mub24oJ2V4aXQnLCBzZXJ2ZXJDbGVhbnVwKTtcbiAgICByZXR1cm4gX3NlcnZlckNyZWF0ZShTT0NLRVRGSUxFLCBvbk1zZyk7XG59XG5cblxuZXhwb3J0IGNvbnN0IGNsaWVudENsZWFudXAgPSAoKSA9PiB7XG4gICAgaWYgKCFTSFVURE9XTiAmJiBjbGllbnQpIHtcbiAgICAgICAgU0hVVERPV04gPSB0cnVlO1xuICAgICAgICAvLyBsb2cubG9nKFwiU29ja2V0IGNsaWVudDogVGVybWluYXRpbmcuXCIpO1xuICAgICAgICBjbGllbnQuZW5kKCk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgY2xpZW50Q3JlYXRlID0gKCkgPT4ge1xuICAgIC8vIENvbm5lY3QgdG8gc2VydmVyLlxuICAgIC8vIGxvZy5sb2coXCJTb2NrZXQgY2xpZW50OiBjb25uZWN0aW5nIHRvIHNlcnZlclwiKTtcbiAgICBwcm9jZXNzLm9uKCdleGl0JywgY2xpZW50Q2xlYW51cCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPG5ldC5Tb2NrZXQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNsaWVudCA9IG5ldC5jcmVhdGVDb25uZWN0aW9uKFNPQ0tFVEZJTEUpXG4gICAgICAgICAgICAub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbG9nLmxvZyhcIlNvY2tldCBjbGllbnQ6IGNvbm5lY3RlZFwiKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNsaWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTWVzc2FnZXMgYXJlIGJ1ZmZlcnMuIHVzZSB0b1N0cmluZ1xuICAgICAgICAgICAgLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGE6IEJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTdHIgPSBkYXRhLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgbG9nLmxvZyhkYXRhU3RyKTtcbiAgICAgICAgICAgICAgICAvLyBpZiAoZGF0YSA9PT0gJ19fYm9vcCcpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgY2xpZW50LndyaXRlKCdfX3Nub290Ym9vcGVkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nLmxvZygncG9sIGRhZW1vbiBub3QgcnVubmluZy4gcnVuIGBwb2wgYm9vdGAgZmlyc3QhJyk7IHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgIH0pLm9uKCdjbG9zZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gbG9nLmxvZygnU2VydmVyIGNsb3NlZC4nKTsgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0iLCIvLyB0ZXJtaW5hbCBkZWZpbml0aW9uXG5jb25zdCB0ID0ge1xuXG4gICAgLy8gdGVybWluYWwgc3Rkb3V0XG4gICAgc3Rkb3V0OiBwcm9jZXNzLnN0ZG91dCxcblxuICAgIC8qKlxuICAgICAqIHByaW50IGZvcm1hdFxuICAgICAqL1xuICAgIHByaW50OiBmdW5jdGlvbiAoc3RyID0gXCJcIikgeyB0LnN0ZG91dC53cml0ZShzdHIpOyByZXR1cm4gdDsgfSxcblxuICAgIGJvbGQ6IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgY29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5tYy5ib2xkICsgY29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGl0YWxpYzogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBjb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0Lm1jLml0YWxpYyArIGNvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICB1bmRlcmxpbmU6IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgY29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5tYy51bmRlcmxpbmUgKyBjb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgaW52ZXJzZTogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBjb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0Lm1jLmludmVyc2UgKyBjb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgc3RyaWtlOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGNvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQubWMuc3RyaWtlICsgY29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuXG5cbiAgICBkZWZhdWx0Q29sb3I6IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmRlZmF1bHRDb2xvciArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJsYWNrOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHsgcmV0dXJuIHQucHJpbnQodC5mYy5ibGFjayArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIHJlZDogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMucmVkICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgZ3JlZW46IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmdyZWVuICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgeWVsbG93OiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHsgcmV0dXJuIHQucHJpbnQodC5mYy55ZWxsb3cgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBibHVlOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHsgcmV0dXJuIHQucHJpbnQodC5mYy5ibHVlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgbWFnZW50YTogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMubWFnZW50YSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGN5YW46IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmN5YW4gKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICB3aGl0ZTogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMud2hpdGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBicmlnaHRCbGFjazogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMuYnJpZ2h0QmxhY2sgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBicmlnaHRSZWQ6IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmJyaWdodFJlZCArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJyaWdodEdyZWVuOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHsgcmV0dXJuIHQucHJpbnQodC5mYy5icmlnaHRHcmVlbiArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJyaWdodFllbGxvdzogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMuYnJpZ2h0WWVsbG93ICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYnJpZ2h0Qmx1ZTogZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7IHJldHVybiB0LnByaW50KHQuZmMuYnJpZ2h0Qmx1ZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJyaWdodE1hZ2VudGE6IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmJyaWdodE1hZ2VudGEgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBicmlnaHRDeWFuOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHsgcmV0dXJuIHQucHJpbnQodC5mYy5icmlnaHRDeWFuICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYnJpZ2h0V2hpdGU6IGZ1bmN0aW9uIChzdHI6IHN0cmluZykgeyByZXR1cm4gdC5wcmludCh0LmZjLmJyaWdodFdoaXRlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgY3VzdG9tQ29sb3I6IGZ1bmN0aW9uIChjb2RlTnVtYmVyOiBudW1iZXIsIHN0cjogc3RyaW5nKSB7IGNvbnN0IGNvZGUgPSBpc05hTihjb2RlTnVtYmVyKSA/IGNvZGVOdW1iZXIgOiBgXFx4MWJbMzg7NTske2NvZGVOdW1iZXJ9bWA7IHJldHVybiB0LnByaW50KGNvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKSB9LFxuXG4gICAgYmdEZWZhdWx0Q29sb3I6IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgZmNDb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0LmZjLmJyaWdodFdoaXRlICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdCbGFjazogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQuYmMuYmxhY2sgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ1JlZDogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQuYmMucmVkICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdHcmVlbjogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQuYmMuZ3JlZW4gKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ1llbGxvdzogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQuYmMueWVsbG93ICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdCbHVlOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5ibHVlICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdNYWdlbnRhOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5tYWdlbnRhICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdDeWFuOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5jeWFuICsgZmNDb2RlICsgc3RyICsgdC5tYy5yZXNldEFsbCk7IH0sXG4gICAgYmdXaGl0ZTogZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7IHJldHVybiB0LnByaW50KHQuYmMud2hpdGUgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodEJsYWNrOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5icmlnaHRCbGFjayArIGZjQ29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJnQnJpZ2h0UmVkOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5icmlnaHRSZWQgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodEdyZWVuOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5icmlnaHRHcmVlbiArIGZjQ29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGJnQnJpZ2h0WWVsbG93OiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5icmlnaHRZZWxsb3cgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodEJsdWU6IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgZmNDb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0LmJjLmJyaWdodEJsdWUgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodE1hZ2VudGE6IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgZmNDb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0LmJjLmJyaWdodE1hZ2VudGEgKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodEN5YW46IGZ1bmN0aW9uIChzdHI6IHN0cmluZywgZmNDb2RlID0gXCJcIikgeyByZXR1cm4gdC5wcmludCh0LmJjLmJyaWdodEN5YW4gKyBmY0NvZGUgKyBzdHIgKyB0Lm1jLnJlc2V0QWxsKTsgfSxcbiAgICBiZ0JyaWdodFdoaXRlOiBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIGZjQ29kZSA9IFwiXCIpIHsgcmV0dXJuIHQucHJpbnQodC5iYy5icmlnaHRXaGl0ZSArIGZjQ29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpOyB9LFxuICAgIGN1c3RvbUJnQ29sb3I6IGZ1bmN0aW9uIChjb2RlTnVtYmVyOiBudW1iZXIsIHN0cjogc3RyaW5nLCBmY0NvZGUgPSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBpc05hTihjb2RlTnVtYmVyKSA/IChjb2RlTnVtYmVyKS50b1N0cmluZygpIDogYFxceDFiWzQ4OzU7JHtjb2RlTnVtYmVyfW1gO1xuICAgICAgICBjb25zdCBmQ29kZSA9IGlzTmFOKGNvZGVOdW1iZXIpID8gKGNvZGVOdW1iZXIpLnRvU3RyaW5nKCkgOiBgXFx4MWJbMzg7NTske2NvZGVOdW1iZXJ9bWA7XG4gICAgICAgIHJldHVybiB0LnByaW50KGNvZGUgKyBmQ29kZSArIHN0ciArIHQubWMucmVzZXRBbGwpO1xuICAgIH0sXG5cbiAgICAvLyBtb2RpZmllciBjb2Rlc1xuICAgIG1jOiB7XG4gICAgICAgIHJlc2V0QWxsOiAnXFx4MWJbMG1cXHgxYlszOW1cXHgxYls0OW0nLFxuICAgICAgICBjbGVhckxpbmVDdXJzb3JSaWdodDogYFxceDFiW0tgLFxuICAgICAgICBjbGVhckxpbmU6IGBcXHgxYlsyS2AsXG4gICAgICAgIHN0eWxlUmVzZXQ6ICdcXHgxYlswbScsXG4gICAgICAgIGJvbGQ6ICdcXHgxYlsxbScsXG4gICAgICAgIGl0YWxpYzogJ1xceDFiWzNtJyxcbiAgICAgICAgdW5kZXJsaW5lOiAnXFx4MWJbNG0nLFxuICAgICAgICBpbnZlcnNlOiAnXFx4MWJbN20nLFxuICAgICAgICBzdHJpa2U6ICdcXHgxYls5bScsXG4gICAgICAgIGN1cnNvckhpZGU6IGBcXHgxYls/MjVsYCxcbiAgICAgICAgY3Vyc29yU2hvdzogYFxceDFiWz8yNWhgLFxuICAgIH0sXG5cbiAgICAvLyBGb3JlZ3JvdW5kIGNvbG9yXG4gICAgZmM6IHtcbiAgICAgICAgZGVmYXVsdENvbG9yOiAnXFx4MWJbMzltJyxcbiAgICAgICAgYmxhY2s6ICdcXHgxYlszMG0nLFxuICAgICAgICByZWQ6ICdcXHgxYlszMW0nLFxuICAgICAgICBncmVlbjogJ1xceDFiWzMybScsXG4gICAgICAgIHllbGxvdzogJ1xceDFiWzMzbScsXG4gICAgICAgIGJsdWU6ICdcXHgxYlszNG0nLFxuICAgICAgICBtYWdlbnRhOiAnXFx4MWJbMzVtJyxcbiAgICAgICAgY3lhbjogJ1xceDFiWzM2bScsXG4gICAgICAgIHdoaXRlOiAnXFx4MWJbMzdtJyxcbiAgICAgICAgYnJpZ2h0QmxhY2s6ICdcXHgxYls5MG0nLFxuICAgICAgICBicmlnaHRSZWQ6ICdcXHgxYls5MW0nLFxuICAgICAgICBicmlnaHRHcmVlbjogJ1xceDFiWzkybScsXG4gICAgICAgIGJyaWdodFllbGxvdzogJ1xceDFiWzkzbScsXG4gICAgICAgIGJyaWdodEJsdWU6ICdcXHgxYls5NG0nLFxuICAgICAgICBicmlnaHRNYWdlbnRhOiAnXFx4MWJbOTVtJyxcbiAgICAgICAgYnJpZ2h0Q3lhbjogJ1xceDFiWzk2bScsXG4gICAgICAgIGJyaWdodFdoaXRlOiAnXFx4MWJbOTdtJyxcbiAgICAgICAgY3VzdG9tQ29sb3I6IGZ1bmN0aW9uIChjb2RlOiBudW1iZXIpIHsgcmV0dXJuIGBcXHgxYlszODs1OyR7Y29kZX1tYDsgfSxcbiAgICB9LFxuXG4gICAgLy8gQmFja2dyb3VuZCBjb2xvclxuICAgIGJjOiB7XG4gICAgICAgIGRlZmF1bHRDb2xvcjogJ1xceDFiWzQ5bScsXG4gICAgICAgIGJsYWNrOiAnXFx4MWJbNDBtJyxcbiAgICAgICAgcmVkOiAnXFx4MWJbNDFtJyxcbiAgICAgICAgZ3JlZW46ICdcXHgxYls0Mm0nLFxuICAgICAgICB5ZWxsb3c6ICdcXHgxYls0M20nLFxuICAgICAgICBibHVlOiAnXFx4MWJbNDRtJyxcbiAgICAgICAgbWFnZW50YTogJ1xceDFiWzQ1bScsXG4gICAgICAgIGN5YW46ICdcXHgxYls0Nm0nLFxuICAgICAgICB3aGl0ZTogJ1xceDFiWzQ3bScsXG4gICAgICAgIGJyaWdodEJsYWNrOiAnXFx4MWJbMTAwbScsXG4gICAgICAgIGJyaWdodFJlZDogJ1xceDFiWzEwMW0nLFxuICAgICAgICBicmlnaHRHcmVlbjogJ1xceDFiWzEwMm0nLFxuICAgICAgICBicmlnaHRZZWxsb3c6ICdcXHgxYlsxMDNtJyxcbiAgICAgICAgYnJpZ2h0Qmx1ZTogJ1xceDFiWzEwNG0nLFxuICAgICAgICBicmlnaHRNYWdlbnRhOiAnXFx4MWJbMTA1bScsXG4gICAgICAgIGJyaWdodEN5YW46ICdcXHgxYlsxMDZtJyxcbiAgICAgICAgYnJpZ2h0V2hpdGU6ICdcXHgxYlsxMDdtJyxcbiAgICAgICAgY3VzdG9tQmdDb2xvcjogZnVuY3Rpb24gKGNvZGU6IG51bWJlcikgeyByZXR1cm4gYFxceDFiWzQ4OzU7JHtjb2RlfW1gOyB9LFxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCB0ZXJtID0gdDtcbiIsImltcG9ydCB7IHRlcm0gfSBmcm9tICcuL3Rlcm0nO1xuXG5jb25zdCBVU0FHRSA9IHtcbiAgICBuYW1lOiAnTkFNRVxcbicsXG4gICAgdXNhZ2U6ICdVU0FHRVxcbicsXG4gICAgb3B0aW9uczogJ09QVElPTlNcXG4nLFxuICAgIGNvbW1hbmRzOiAnQ09NTUFORFNcXG4nLFxuICAgIGluZGVudDogJyAgICAnLFxuICAgIHR5cGVJbmRlbnQ6ICcgICAnLFxuICAgIG9wdGlvbkluZGVudDogNCxcbiAgICBtYXhTd2l0Y2hMZW5ndGg6IDI1LFxuICAgIGhlYWRlcjogJ1xcbicsXG59XG5cbmNvbnN0IF9nZXQgPSAocHJvcCA9ICcnKSA9PiB7XG4gICAgcmV0dXJuIHByb3AgIT09IHVuZGVmaW5lZCAmJiBwcm9wLmxlbmd0aCA/IHByb3AgOiB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IF9wcmludFRpdGxlcyA9ICh0aXRsZTogc3RyaW5nLCBpbmZvOiBBcnJheTxhbnk+ID0gW10sIGJvbGQ/OiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGluZm8ubGVuZ3RoICYmIF9nZXQoaW5mb1swXS5uYW1lKSkge1xuICAgICAgICB0ZXJtLnByaW50KHRlcm0ubWMuYm9sZCArIFVTQUdFLmhlYWRlciArIHRpdGxlKTtcblxuICAgICAgICBpbmZvLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgICB0ZXJtLnByaW50KHRlcm0ubWMucmVzZXRBbGwpO1xuXG4gICAgICAgICAgICBpZiAoYm9sZCkgdGVybS5wcmludCh0ZXJtLmZjLmJyaWdodFdoaXRlICsgdGVybS5tYy5ib2xkKTtcbiAgICAgICAgICAgIHRlcm0ucHJpbnQoYCR7VVNBR0UuaW5kZW50ICsgaS5uYW1lfWApO1xuICAgICAgICAgICAgY29uc3QgZGVzYyA9IF9nZXQoaS5kZXNjKTtcbiAgICAgICAgICAgIGlmIChkZXNjKSB7XG4gICAgICAgICAgICAgICAgdGVybS5wcmludCh0ZXJtLm1jLnJlc2V0QWxsKS5wcmludChgXFxuYCk7XG4gICAgICAgICAgICAgICAgdGVybS5wcmludChgJHtVU0FHRS5pbmRlbnR9JHtVU0FHRS5pbmRlbnR9JHtkZXNjfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGVybS5wcmludCh0ZXJtLm1jLnJlc2V0QWxsKS5wcmludChgXFxuYCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gdHlwZTogW2Jvb2xlYW58c3RyaW5nfG51bWJlcl1cbmV4cG9ydCBjb25zdCBwcmludFVzYWdlID0gKHUgPSB7XG4gICAgbmFtZTogJycsIHVzYWdlOiBbeyBuYW1lOiAnJywgZGVzYzogJycgfV0sIG9wdGlvbnM6IFt7IHN3aXRjaDogJycsIGRlc2M6ICcnLCB0eXBlOiAnJyB9XSxcbiAgICBjb21tYW5kczogW3sgc3dpdGNoOiAnJywgZGVzYzogJycgfV0sXG4gICAgY29weXJpZ2h0OiAnY29weXJpZ2h0QDIwMjAnLCB2ZXJzaW9uOiAnMC4wLjEnXG59KSA9PiB7XG4gICAgX3ByaW50VGl0bGVzKFVTQUdFLm5hbWUsIFt7IG5hbWU6IHUubmFtZSB9XSk7XG4gICAgX3ByaW50VGl0bGVzKFVTQUdFLnVzYWdlLCB1LnVzYWdlLCB0cnVlKTtcbiAgICBpZiAodS5vcHRpb25zICYmIHUub3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG9wdGlvblRpdGxlUHJpbnRlZCA9IGZhbHNlO1xuICAgICAgICB1Lm9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgIGlmIChvLnN3aXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvblRpdGxlUHJpbnRlZCkgeyBvcHRpb25UaXRsZVByaW50ZWQgPSB0cnVlOyB0ZXJtLnByaW50KHRlcm0ubWMuYm9sZCArIFVTQUdFLmhlYWRlciArIFVTQUdFLm9wdGlvbnMgKyB0ZXJtLm1jLnJlc2V0QWxsKTsgfVxuICAgICAgICAgICAgICAgIHRlcm0ucHJpbnQoYCR7dGVybS5mYy5icmlnaHRXaGl0ZSArIHRlcm0ubWMuYm9sZH0ke1VTQUdFLmluZGVudCArIG8uc3dpdGNofVxcbmApO1xuICAgICAgICAgICAgICAgIHRlcm0ucHJpbnQoYCR7dGVybS5tYy5yZXNldEFsbH0ke1VTQUdFLmluZGVudH0ke1VTQUdFLmluZGVudH0ke28uZGVzY31gKTtcbiAgICAgICAgICAgICAgICBpZiAoby50eXBlKSB0ZXJtLnByaW50KGAke3Rlcm0uZmMuY3lhbn0gWyR7by50eXBlfV1gKTtcbiAgICAgICAgICAgICAgICB0ZXJtLnByaW50KGBcXG5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1LmNvbW1hbmRzICYmIHUuY29tbWFuZHMubGVuZ3RoKSB7XG4gICAgICAgIGxldCBvcHRpb25UaXRsZVByaW50ZWQgPSBmYWxzZTtcbiAgICAgICAgdS5jb21tYW5kcy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgaWYgKG8uc3dpdGNoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9uVGl0bGVQcmludGVkKSB7IG9wdGlvblRpdGxlUHJpbnRlZCA9IHRydWU7IHRlcm0ucHJpbnQodGVybS5tYy5ib2xkICsgVVNBR0UuaGVhZGVyICsgVVNBR0UuY29tbWFuZHMgKyB0ZXJtLm1jLnJlc2V0QWxsKTsgfVxuICAgICAgICAgICAgICAgIHRlcm0ucHJpbnQoYCR7dGVybS5mYy5icmlnaHRXaGl0ZSArIHRlcm0ubWMuYm9sZH0ke1VTQUdFLmluZGVudCArIG8uc3dpdGNofVxcbmApO1xuICAgICAgICAgICAgICAgIHRlcm0ucHJpbnQoYCR7dGVybS5tYy5yZXNldEFsbH0ke1VTQUdFLmluZGVudH0ke1VTQUdFLmluZGVudH0ke28uZGVzY31gKTtcbiAgICAgICAgICAgICAgICB0ZXJtLnByaW50KGBcXG5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRlcm0ucHJpbnQoVVNBR0UuaGVhZGVyKTtcbiAgICBpZiAoKHUudmVyc2lvbiAmJiB1LnZlcnNpb24ubGVuZ3RoKSB8fCAodS5jb3B5cmlnaHQgJiYgdS5jb3B5cmlnaHQubGVuZ3RoKSkgdGVybS5wcmludCgnPT0gJyk7XG4gICAgaWYgKHUudmVyc2lvbiAmJiB1LnZlcnNpb24ubGVuZ3RoKSB0ZXJtLnByaW50KGB2JHt1LnZlcnNpb259YCk7XG4gICAgaWYgKHUuY29weXJpZ2h0ICYmIHUuY29weXJpZ2h0Lmxlbmd0aCkge1xuICAgICAgICBpZiAodS52ZXJzaW9uICYmIHUudmVyc2lvbi5sZW5ndGgpIHRlcm0ucHJpbnQoYCAtIGApO1xuICAgICAgICB0ZXJtLnByaW50KHUuY29weXJpZ2h0KTtcbiAgICB9O1xuICAgIGlmICgodS52ZXJzaW9uICYmIHUudmVyc2lvbi5sZW5ndGgpIHx8ICh1LmNvcHlyaWdodCAmJiB1LmNvcHlyaWdodC5sZW5ndGgpKSB0ZXJtLnByaW50KCcgPT1cXG5cXG4nKTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjaGlsZF9wcm9jZXNzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5ldFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJvc1wiKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1Nyk7XG4iXSwibmFtZXMiOlsiaXNOdW1iZXIiLCJ4IiwidGVzdCIsImlzQ29uc3RydWN0b3JPclByb3RvIiwib2JqIiwia2V5IiwibW9kdWxlIiwiZXhwb3J0cyIsImFyZ3MiLCJvcHRzIiwiZmxhZ3MiLCJib29scyIsInN0cmluZ3MiLCJ1bmtub3duRm4iLCJ1bmtub3duIiwiYm9vbGVhbiIsImFsbEJvb2xzIiwiY29uY2F0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImZvckVhY2giLCJhbGlhc2VzIiwiYWxpYXNJc0Jvb2xlYW4iLCJzb21lIiwiT2JqZWN0Iiwia2V5cyIsImFsaWFzIiwieSIsInN0cmluZyIsImsiLCJkZWZhdWx0cyIsImRlZmF1bHQiLCJhcmd2IiwiXyIsInNldEtleSIsInZhbHVlIiwibyIsImkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJwcm90b3R5cGUiLCJOdW1iZXIiLCJTdHJpbmciLCJBcnJheSIsImxhc3RLZXkiLCJpc0FycmF5IiwicHVzaCIsInNldEFyZyIsInZhbCIsImFyZyIsImFyZ0RlZmluZWQiLCJzcGxpdCIsIm5vdEZsYWdzIiwiaW5kZXhPZiIsInNsaWNlIiwibmV4dCIsIm0iLCJtYXRjaCIsImxldHRlcnMiLCJicm9rZW4iLCJqIiwic3RvcEVhcmx5IiwiYXBwbHkiLCJwcm9jZXNzIiwiaGVscCIsInByaW50VXNhZ2UiLCJuYW1lIiwidXNhZ2UiLCJkZXNjIiwib3B0aW9ucyIsInN3aXRjaCIsInR5cGUiLCJjb21tYW5kcyIsInZlcnNpb24iLCJjb3B5cmlnaHQiLCJleGl0IiwiaCIsInBvbERhZW1vbiIsInBvbCIsImNvbnN0cnVjdG9yIiwiU0VSVklDRV9TVEFURSIsIlJFQURZIiwic3RhdGUiLCJVUCIsIkRPV04iLCJTVE9QIiwiQ0xJX1BSRV9JTlRFUlZBTCIsIkNMSV9JTlRFUlZBTCIsInJ1bm5pbmciLCJzcnYiLCJsb2dpblNlcnZpY2UiLCJpbml0Iiwic2VydmljZU5hbWUiLCJwYXRoIiwidGhpcyIsInByb2Nlc3NlcyIsImludGVydmFsIiwiYmVmb3JlX29uU3RhcnQiLCJhZnRlcl9vblN0YXJ0IiwiYmVmb3JlX29uU3RvcCIsImFmdGVyX29uU3RvcCIsImNsaSIsImFmdGVyX29uTG9naW4iLCJiZWZvcmVfb25Mb2dpbiIsImV4ZWMiLCJvblN0YXJ0Iiwib25Mb2dpbiIsInN0YXJ0UnVuQ2hlY2tlciIsInByZVBvc3RTdGF0ZSIsIm1zZyIsImxvZ2dlciIsInJlc29sdmVyIiwicnVuU3RhdGUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwic3RhcnRSZXNvbHZlciIsInJ1bkNoZWNrZXIiLCJzZXRJbnRlcnZhbCIsIndyaXRlIiwiY2xlYXJJbnRlcnZhbCIsInRlcm0iLCJmYyIsImdyZWVuIiwibWMiLCJyZXNldEFsbCIsInNldFRpbWVvdXQiLCJzdG9wUnVuQ2hlY2tlciIsInN0YWdlIiwic2V0UnVubmluZyIsImFkZFByb2Nlc3MiLCJwcm9jSWQiLCJwcm9jTmFtZSIsImFkZENsaSIsImZ1bmNOYW1lIiwidGltZXN0YW1wIiwic3Bhd24iLCJpc1N0YXRlU3RvcCIsImFkZEV4ZWMiLCJtc2dUb0xvZyIsImRlbENsaSIsImRlbEV4ZWMiLCJzZXRTZXR1cCIsInNldHVwIiwic2V0TG9naW5TZXJ2aWNlIiwiZ2V0TG9naW5TZXJ2aWNlIiwic3RhdGVJbml0IiwiZ2V0IiwiaXNTdGF0ZUFmdGVyRG93biIsInNldFN0YXRlUmVhZHkiLCJzZXRTdGF0ZURvd24iLCJzZXRTdGF0ZVN0b3AiLCJnZXRBbGxSdW5uaW5nIiwiZ2V0U2VydmljZXMiLCJzIiwiZ2V0QWxsU3RvcHBlZCIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsInRvVXBwZXJDYXNlIiwiZ2V0TmFub1NlY1RpbWUiLCJoclRpbWUiLCJocnRpbWUiLCJjbWQiLCJhcmd1bWVudHMiLCJzcGF3blN5bmMiLCJzaGlmdCIsImVuY29kaW5nIiwic3RkaW8iLCJUQVNLX0lOREVOVCIsImxvZyIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyIiwiZXJyb3IiLCJlbmQiLCJleGlzdHNTeW5jIiwiTE9HX0ZJTEVfUEFUSCIsImFjY2Vzc1N5bmMiLCJMT0dfRklMRV9ST09UIiwiY29uc3RhbnRzIiwiUl9PSyIsIldfT0siLCJYX09LIiwicmVkIiwicG9sUGx1Z2luRm9sZGVyIiwiZW52IiwiWlNIIiwicG9sUGx1Z2luVmVyc2lvbiIsImVuZHNXaXRoIiwiX19kaXJuYW1lIiwiVFoiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImNsaUdlbmVyYXRvciIsImNvbnRyb2xsZXIiLCJiaW5kT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnbG9iYWxUaGlzIiwic2VydmljZSIsIl9fcHJvcF9fIiwibm9FcnIiLCJzcGxpdEJ5TGluZSIsInNwbGl0QWxsIiwiZ2lkIiwidWlkIiwid2QiLCJjd2QiLCJlb2wiLCJkbyIsImNsaURvIiwidG9Mb2ciLCJzdHIiLCJiaW5kIiwiZXhlY0dlbmVyYXRvciIsIml0IiwiZXhlY0RvIiwicHJvZyIsInBhcmFtcyIsIkVycm9yIiwic3RhY2siLCJQT0xfQ0xfRU5WIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjbGlTcGxpdEJ5TGluZVN5bmMiLCJjIiwic3Bhd25DbWQiLCJwcm9taXNlIiwicmVzIiwic3Rkb3V0Iiwib24iLCJkYXRhIiwic3RkZXJyIiwibGluZXMiLCJfb3V0IiwiX2xpbmVzIiwibCIsIl9zZXR1cCIsInRyaW0iLCJyZXBsYWNlIiwic3NPblN0YXJ0Iiwic3NPblN0b3AiLCJzc09uTG9naW4iLCJfY21kIiwic3RhdHVzIiwiY2xpU3BsaXRCeUxpbmUiLCJsb2dGaWxlIiwiZ2xvYmFsIiwiRGF0ZSIsIklTT1N0cmluZ3MiLCJ0em8iLCJnZXRUaW1lem9uZU9mZnNldCIsInBhZCIsIm51bSIsInpvbmUiLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInRvSVNPU3RyaW5nIiwibG9nX2ZpbGUiLCJjcmVhdGVXcml0ZVN0cmVhbSIsIm1lc3NhZ2UiLCJsZXZlbCIsInRpbWUiLCJKU09OIiwic3RyaW5naWZ5IiwiUE9TU0lCTEVfT1BUSU9OU19NU0ciLCJQT0xfQ09ORklHX0ZPTERFUiIsImhvbWVkaXIiLCJlbnZzIiwibG9va3VwIiwiX3JzIiwiX2xvZ2luU2VydmljZSIsIm1hcCIsImYiLCJfcG9sRGFlbW9uUnVubmluZ0NoZWNrIiwiciIsInBvcCIsIl9ydW5uaW5nX2VudnMiLCJlIiwiZW52RmlsZSIsImZpbGVDb250ZW50IiwicHJvY0luZm8iLCJzcnZJbmZvIiwiZHluYW1pY1JlcXVpcmUiLCJzdGFydCIsInByb21pc2VBbGxTZXJ2aWNlIiwic2VydmljZVN0YXJ0UmVzb2x2ZXIiLCJ5ZWxsb3ciLCJQT0wiLCJ0aGVuIiwiYWxsIiwic3RvcCIsImZvcmNlIiwic2VydmljZVN0b3BSZXNvbHZlciIsInByZVN0b3BSZXNvbHZlciIsInBvc3RTdG9wUmVzb2x2ZXIiLCJwcm9taXNlQWxsUHJlUG9zdFN0b3BEb25lIiwiX3N0b3AiLCJwZW5kaW5nUHJvbWlzZXMiLCJwIiwiaGVhZE1zZyIsImtpbGwiLCJvblN0b3AiLCJzdG9wQWxsIiwic2VydmVyQ3JlYXRlIiwic29ja2V0IiwibG9nb3V0Iiwic2VydmVyQ2xlYW51cCIsInNydk5hbWUiLCJwcm9jIiwiY2xpZW50Q3JlYXRlIiwiY29ubmVjdGlvbnMiLCJzZXJ2ZXIiLCJjbGllbnQiLCJTSFVURE9XTiIsIlNPQ0tFVEZJTEUiLCJjbGllbnRzIiwiY2xvc2UiLCJvbk1zZyIsInN0cmVhbSIsInVubGlua1N5bmMiLCJzb2NrIiwiY3JlYXRlU2VydmVyIiwic2VsZiIsIm5vdyIsIl9tc2ciLCJwYXJzZSIsImV4YyIsImxpc3RlbiIsIl9zb2NrZXQiLCJfc2VydmVyQ3JlYXRlIiwiY2xpZW50Q2xlYW51cCIsImNyZWF0ZUNvbm5lY3Rpb24iLCJkYXRhU3RyIiwidCIsInByaW50IiwiYm9sZCIsImNvZGUiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJpbnZlcnNlIiwic3RyaWtlIiwiZGVmYXVsdENvbG9yIiwiYmxhY2siLCJibHVlIiwibWFnZW50YSIsImN5YW4iLCJ3aGl0ZSIsImJyaWdodEJsYWNrIiwiYnJpZ2h0UmVkIiwiYnJpZ2h0R3JlZW4iLCJicmlnaHRZZWxsb3ciLCJicmlnaHRCbHVlIiwiYnJpZ2h0TWFnZW50YSIsImJyaWdodEN5YW4iLCJicmlnaHRXaGl0ZSIsImN1c3RvbUNvbG9yIiwiY29kZU51bWJlciIsImlzTmFOIiwiYmdEZWZhdWx0Q29sb3IiLCJmY0NvZGUiLCJiZ0JsYWNrIiwiYmMiLCJiZ1JlZCIsImJnR3JlZW4iLCJiZ1llbGxvdyIsImJnQmx1ZSIsImJnTWFnZW50YSIsImJnQ3lhbiIsImJnV2hpdGUiLCJiZ0JyaWdodEJsYWNrIiwiYmdCcmlnaHRSZWQiLCJiZ0JyaWdodEdyZWVuIiwiYmdCcmlnaHRZZWxsb3ciLCJiZ0JyaWdodEJsdWUiLCJiZ0JyaWdodE1hZ2VudGEiLCJiZ0JyaWdodEN5YW4iLCJiZ0JyaWdodFdoaXRlIiwiY3VzdG9tQmdDb2xvciIsImZDb2RlIiwiY2xlYXJMaW5lQ3Vyc29yUmlnaHQiLCJjbGVhckxpbmUiLCJzdHlsZVJlc2V0IiwiY3Vyc29ySGlkZSIsImN1cnNvclNob3ciLCJVU0FHRSIsIl9nZXQiLCJwcm9wIiwiX3ByaW50VGl0bGVzIiwidGl0bGUiLCJpbmZvIiwidSIsIm9wdGlvblRpdGxlUHJpbnRlZCIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=